{"version":3,"file":"Setlists-CiuoQEhR.js","sources":["../../node_modules/.pnpm/@mui+icons-material@6.4.6_@mui+material@6.4.6_@emotion+react@11.14.0_@types+react@19.0.2_reac_bwwdgqvgtdmzbxodzng2tkdray/node_modules/@mui/icons-material/esm/LockOpen.js","../../node_modules/.pnpm/@mui+icons-material@6.4.6_@mui+material@6.4.6_@emotion+react@11.14.0_@types+react@19.0.2_reac_bwwdgqvgtdmzbxodzng2tkdray/node_modules/@mui/icons-material/esm/LockOutlined.js","../../src/routes/Edit/Setlists.tsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z\"\n}), 'LockOpen');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2M9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9zm9 14H6V10h12zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2\"\n}), 'LockOutlined');","import styled from '@emotion/styled';\nimport { LockOpen, LockOutlined } from '@mui/icons-material';\nimport { Button, Grid } from '@mui/material';\nimport { useBackground } from 'modules/Elements/BackgroundContext';\nimport NoPrerender from 'modules/Elements/NoPrerender';\nimport NormalizeFontSize from 'modules/Elements/NormalizeFontSize';\nimport useSongIndex from 'modules/Songs/hooks/useSongIndex';\nimport { encodeSongList } from 'modules/Songs/utils/setlists';\nimport useBackgroundMusic from 'modules/hooks/useBackgroundMusic';\nimport { useState } from 'react';\nimport { Helmet } from 'react-helmet';\nimport SongsTable from 'routes/Edit/Components/SongsTable';\nimport createPersistedState from 'use-persisted-state';\nimport { Link } from 'wouter';\n\nconst MAX_SONGS_PER_SETLIST = 300;\n\ninterface StoredSetlistEntity {\n  name: string;\n  songList: number[];\n  isEditable: boolean;\n}\n\nconst useSetlists = createPersistedState<StoredSetlistEntity[]>('setlists');\n\nexport default function Setlists() {\n  useBackground(false);\n  useBackgroundMusic(false);\n  const { data } = useSongIndex(true);\n  const [setlists, setSetlists] = useSetlists([]);\n  const [selectedSetlist, setSelectedSetlist] = useState<string | null>(null);\n\n  const selectedSongs = setlists.find((setlist) => setlist.name === selectedSetlist)?.songList || [];\n  const onSelect = (selected: number[]) => {\n    if (selected.length > MAX_SONGS_PER_SETLIST) {\n      alert(`You can only select up to ${MAX_SONGS_PER_SETLIST} songs per setlist.`);\n      return;\n    }\n    setSetlists((prevSetlists) =>\n      prevSetlists.map((setlist) => (setlist.name === selectedSetlist ? { ...setlist, songList: selected } : setlist)),\n    );\n  };\n\n  if (!data) return <>Loading</>;\n\n  return (\n    <>\n      <Helmet>\n        <title>Song List | AllKaraoke.Party - Free Online Karaoke Party Game</title>\n      </Helmet>\n      <NoPrerender>\n        <Container>\n          <NormalizeFontSize />\n          <Grid container rowGap={2}>\n            <Grid item xs={3} display={'flex'} alignItems={'center'} justifyContent={'flex-start'}>\n              <Link to=\"menu/\">\n                <Button data-test=\"main-menu-link\">Return to main menu</Button>\n              </Link>\n            </Grid>\n            <Grid item xs={6} display=\"flex\" alignItems=\"center\" justifyContent=\"center\">\n              <h4>Manage setlists</h4>\n            </Grid>\n            <Grid item xs={12}>\n              <div className=\"flex flex-col items-stretch gap-4\">\n                <p className=\"leading-6\">\n                  This feature allows you to create a custom game link that includes only a selected subset of songs.\n                  It&#39;s useful for contests or situations where you want to limit which songs are visible. Note that{' '}\n                  <strong>locally added songs cannot be included</strong>. Additionally, if you add or remove a song,{' '}\n                  <strong>the setlist link will change</strong> â€” so it&#39;s recommended to use a{' '}\n                  <a href=\"https://tinyurl.com/\" target=\"_blank\" rel=\"noreferrer\">\n                    URL shortener\n                  </a>{' '}\n                  to generate a consistent short link and update it whenever you modify the setlist. Each setlist can\n                  contain up to {MAX_SONGS_PER_SETLIST} songs.\n                </p>\n                <p>\n                  You can also make a setlist non-editable, which prevents users from adding additional songs to it.\n                </p>\n                <h5 className=\"flex items-center gap-2\">\n                  Your setlists\n                  <Button\n                    onClick={() => {\n                      const name = prompt('Enter setlist name');\n                      if (name) {\n                        setSetlists((prevSetlists) => [...prevSetlists, { name, songList: [], isEditable: true }]);\n                      }\n                    }}>\n                    Create new\n                  </Button>\n                </h5>\n                {setlists.map((setlist) => {\n                  const isSelected = setlist.name === selectedSetlist;\n                  return (\n                    <div className={`flex ${isSelected ? 'bg-blue-100' : ''} items-center gap-4`} key={setlist.name}>\n                      <span className=\"pl-2\">\n                        {setlist.isEditable ? <LockOpen /> : <LockOutlined />}&nbsp;\n                        <strong>{setlist.name}</strong> ({setlist.songList?.length} songs)\n                      </span>\n                      <Button\n                        variant={isSelected ? 'contained' : 'outlined'}\n                        className=\"ml-auto!\"\n                        onClick={() => {\n                          setSelectedSetlist(isSelected ? null : setlist.name);\n                        }}>\n                        Edit\n                      </Button>\n                      <Button\n                        onClick={() =>\n                          setSetlists(\n                            setlists.map((s) => (s.name === setlist.name ? { ...s, isEditable: !s.isEditable } : s)),\n                          )\n                        }>\n                        {setlist.isEditable ? 'Make not editable' : 'Make editable'}\n                      </Button>\n                      <Button\n                        color=\"error\"\n                        onClick={() => {\n                          const confirmed = confirm(`Are you sure you want to delete the setlist \"${setlist.name}\"?`);\n                          if (confirmed) {\n                            setSetlists((prevSetlists) => prevSetlists.filter((s) => s.name !== setlist.name));\n                            if (selectedSetlist === setlist.name) {\n                              setSelectedSetlist(null);\n                            }\n                          }\n                        }}>\n                        Remove\n                      </Button>\n                      <Button\n                        color=\"secondary\"\n                        variant=\"contained\"\n                        onClick={() => {\n                          const url = new URL(window.location.href);\n                          url.pathname = '';\n                          url.searchParams.set('setlist', encodeSongList(setlist.songList, setlist.isEditable));\n                          navigator.clipboard.writeText(url.toString());\n                        }}>\n                        Copy link\n                      </Button>\n                    </div>\n                  );\n                })}\n                {setlists.length === 0 && <h6>No setlists created yet</h6>}\n              </div>\n            </Grid>\n            <Grid item xs={12}>\n              {selectedSetlist && (\n                <SongsTable onSelect={onSelect} selectedSongs={selectedSongs} selectable data={data} />\n              )}\n            </Grid>\n          </Grid>\n        </Container>\n      </NoPrerender>\n    </>\n  );\n}\n\nconst Container = styled.div`\n  margin: 0 auto;\n  height: 100%;\n  width: 1260px;\n  background: white;\n  padding: 60px 20px 0 20px;\n`;\n"],"names":["LockOpen","createSvgIcon","_jsx","LockOutlined","MAX_SONGS_PER_SETLIST","useSetlists","createPersistedState","Setlists","useBackground","useBackgroundMusic","data","useSongIndex","setlists","setSetlists","selectedSetlist","setSelectedSetlist","useState","selectedSongs","find","setlist","name","songList","onSelect","selected","length","prevSetlists","map","jsxs","Fragment","jsx","Helmet","NoPrerender","Container","NormalizeFontSize","Grid","Link","Button","prompt","isEditable","isSelected","s","confirm","filter","url","URL","window","location","href","pathname","searchParams","set","encodeSongList","navigator","clipboard","writeText","toString","SongsTable","_styled","target","styles"],"mappings":"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","x_google_ignoreList":[0,1]}