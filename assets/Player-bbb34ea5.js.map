{"version":3,"file":"Player-bbb34ea5.js","sources":["../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-03f39878ea.zip/node_modules/lodash-es/_castSlice.js","../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-03f39878ea.zip/node_modules/lodash-es/_hasUnicode.js","../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-03f39878ea.zip/node_modules/lodash-es/_asciiToArray.js","../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-03f39878ea.zip/node_modules/lodash-es/_unicodeToArray.js","../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-03f39878ea.zip/node_modules/lodash-es/_stringToArray.js","../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-03f39878ea.zip/node_modules/lodash-es/_createCaseFirst.js","../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-03f39878ea.zip/node_modules/lodash-es/upperFirst.js","../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-03f39878ea.zip/node_modules/lodash-es/capitalize.js","../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-03f39878ea.zip/node_modules/lodash-es/cloneDeep.js","../../.yarn/cache/lodash-es-npm-4.17.21-b45832dfce-03f39878ea.zip/node_modules/lodash-es/uniq.js","../../.yarn/__virtual__/@mui-icons-material-virtual-3a04ed151a/0/cache/@mui-icons-material-npm-5.14.16-b4b4877e88-e4dc4071eb.zip/node_modules/@mui/icons-material/esm/ThumbUpAlt.js","../../.yarn/__virtual__/react-use-virtual-627e9409d1/0/cache/react-use-npm-17.4.0-0ef4521544-98566c4817.zip/node_modules/react-use/esm/useInterval.js","../../src/hooks/usePrevious.ts","../../src/Scenes/SelectInput/SelectInputModal.tsx","../../src/Scenes/Game/Singing/GameOverlay/Components/PauseMenu.tsx","../../src/Songs/utils/getSkipIntroTime.ts","../../src/utils/songHasLongIntro.ts","../../src/Scenes/Game/Singing/GameOverlay/Components/SkipIntro.tsx","../../src/Scenes/Game/Singing/GameOverlay/Components/SkipOutro.tsx","../../src/Scenes/Game/Singing/GameOverlay/Components/DurationBar.tsx","../../.yarn/__virtual__/@mui-icons-material-virtual-3a04ed151a/0/cache/@mui-icons-material-npm-5.14.16-b4b4877e88-e4dc4071eb.zip/node_modules/@mui/icons-material/Error.js","../../.yarn/__virtual__/@mui-icons-material-virtual-3a04ed151a/0/cache/@mui-icons-material-npm-5.14.16-b4b4877e88-e4dc4071eb.zip/node_modules/@mui/icons-material/Warning.js","../../src/Scenes/SingASong/SongSelection/SongSettings/MicCheck/Status.tsx","../../src/hooks/players/usePlayerMicStatus.ts","../../src/Scenes/Game/Singing/GameOverlay/Components/LyricsVolumeIndicator.tsx","../../src/Scenes/Game/Singing/GameOverlay/Components/Lyrics.tsx","../../src/Scenes/Game/Singing/GameOverlay/Components/ScoreText.tsx","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Elements/utils/getNoteColor.ts","../../.yarn/cache/tinycolor2-npm-1.6.0-8df41252c6-066c3acf4f.zip/node_modules/tinycolor2/esm/tinycolor.js","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Elements/ray.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Elements/debris.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Particles/utils.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Particles/SungTriangle.ts","../../.yarn/cache/curtainsjs-npm-8.1.5-1d10752bc9-da0ad53575.zip/node_modules/curtainsjs/src/shaders/chunks/precision.medium.glsl.js","../../.yarn/cache/curtainsjs-npm-8.1.5-1d10752bc9-da0ad53575.zip/node_modules/curtainsjs/src/shaders/chunks/default.attributes.glsl.js","../../.yarn/cache/curtainsjs-npm-8.1.5-1d10752bc9-da0ad53575.zip/node_modules/curtainsjs/src/shaders/chunks/default.varyings.glsl.js","../../.yarn/cache/curtainsjs-npm-8.1.5-1d10752bc9-da0ad53575.zip/node_modules/curtainsjs/src/shaders/plane.vertex.glsl.js","../../.yarn/cache/curtainsjs-npm-8.1.5-1d10752bc9-da0ad53575.zip/node_modules/curtainsjs/src/shaders/plane.fragment.glsl.js","../../.yarn/cache/curtainsjs-npm-8.1.5-1d10752bc9-da0ad53575.zip/node_modules/curtainsjs/src/shaders/shaderpass.vertex.glsl.js","../../.yarn/cache/curtainsjs-npm-8.1.5-1d10752bc9-da0ad53575.zip/node_modules/curtainsjs/src/shaders/shaderpass.fragment.glsl.js","../../src/Scenes/Game/Singing/GameOverlay/Drawing/calculateData.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Elements/roundRect.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/applyColor.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Elements/Cache/Elements/note.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Elements/Cache/Elements/playerNote.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Elements/Cache/spriteMap.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Elements/Cache/utils/createCanvas.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Elements/Cache/cachedSprites.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Elements/spriteWithStartAndEnd.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Elements/note.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Elements/playerFrequencyTrace.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Elements/playerNote.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/ParticleManager.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Particles/Triangle.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Particles/ExplodingNote.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Particles/FadeoutNote.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Particles/Ray.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Particles/Vibrato.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/CanvasDrawing.ts","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Shaders/shader.frag?raw","../../src/Scenes/Game/Singing/GameOverlay/Drawing/Shaders/shader.vert?raw","../../src/Scenes/Game/Singing/GameOverlay/GameOverlay.tsx","../../src/Scenes/Game/Singing/Player.tsx"],"sourcesContent":["import baseSlice from './_baseSlice.js';\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nexport default castSlice;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nexport default hasUnicode;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nexport default asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nexport default unicodeToArray;\n","import asciiToArray from './_asciiToArray.js';\nimport hasUnicode from './_hasUnicode.js';\nimport unicodeToArray from './_unicodeToArray.js';\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nexport default stringToArray;\n","import castSlice from './_castSlice.js';\nimport hasUnicode from './_hasUnicode.js';\nimport stringToArray from './_stringToArray.js';\nimport toString from './toString.js';\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nexport default createCaseFirst;\n","import createCaseFirst from './_createCaseFirst.js';\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nexport default upperFirst;\n","import toString from './toString.js';\nimport upperFirst from './upperFirst.js';\n\n/**\n * Converts the first character of `string` to upper case and the remaining\n * to lower case.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to capitalize.\n * @returns {string} Returns the capitalized string.\n * @example\n *\n * _.capitalize('FRED');\n * // => 'Fred'\n */\nfunction capitalize(string) {\n  return upperFirst(toString(string).toLowerCase());\n}\n\nexport default capitalize;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","import baseUniq from './_baseUniq.js';\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nexport default uniq;\n","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M2 20h2c.55 0 1-.45 1-1v-9c0-.55-.45-1-1-1H2v11zm19.83-7.12c.11-.25.17-.52.17-.8V11c0-1.1-.9-2-2-2h-5.5l.92-4.65c.05-.22.02-.46-.08-.66-.23-.45-.52-.86-.88-1.22L14 2 7.59 8.41C7.21 8.79 7 9.3 7 9.83v7.84C7 18.95 8.05 20 9.34 20h8.11c.7 0 1.36-.37 1.72-.97l2.66-6.15z\"\n}), 'ThumbUpAlt');","import { useEffect, useRef } from 'react';\nvar useInterval = function (callback, delay) {\n    var savedCallback = useRef(function () { });\n    useEffect(function () {\n        savedCallback.current = callback;\n    });\n    useEffect(function () {\n        if (delay !== null) {\n            var interval_1 = setInterval(function () { return savedCallback.current(); }, delay || 0);\n            return function () { return clearInterval(interval_1); };\n        }\n        return undefined;\n    }, [delay]);\n};\nexport default useInterval;\n","import { useEffect, useRef, type MutableRefObject } from 'react';\n\n/**\n * a type-safe version of the `usePrevious` hook described here:\n * @see {@link https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state}\n */\nexport default function usePrevious<T>(value: T): MutableRefObject<T>['current'] {\n  const ref = useRef<T>(value);\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n  return ref.current;\n}\n","import { MenuContainer } from 'Elements/Menu';\nimport Modal from 'Elements/Modal';\nimport SelectInputView from 'Scenes/SelectInput/SelectInputView';\n\ninterface Props {\n  onClose: () => void;\n  closeButtonText: string;\n}\n\nexport default function SelectInputModal({ onClose, closeButtonText }: Props) {\n  return (\n    <Modal onClose={onClose}>\n      <MenuContainer>\n        <SelectInputView\n          smooth={false}\n          onBack={onClose}\n          onFinish={onClose}\n          closeButtonText={closeButtonText}\n          skipText={'Back'}\n        />\n      </MenuContainer>\n    </Modal>\n  );\n}\n","import styled from '@emotion/styled';\nimport { MenuButton, MenuContainer } from 'Elements/Menu';\nimport Modal from 'Elements/Modal';\nimport SelectInputModal from 'Scenes/SelectInput/SelectInputModal';\nimport InputLag from 'Scenes/Settings/InputLag';\nimport useKeyboardNav from 'hooks/useKeyboardNav';\nimport { useEffect, useRef, useState } from 'react';\n\ninterface Props {\n  onResume: () => void;\n  onExit: () => void;\n  onRestart: () => void;\n}\n\nexport default function PauseMenu({ onResume, onExit, onRestart }: Props) {\n  const menuRef = useRef<null | HTMLButtonElement>(null);\n  const inputLagRef = useRef<HTMLInputElement | null>(null);\n\n  useEffect(() => {\n    menuRef.current?.focus();\n  }, [menuRef]);\n\n  const [isInputModalOpen, setIsInputModalOpen] = useState(false);\n\n  const { register } = useKeyboardNav({ enabled: !isInputModalOpen });\n\n  return (\n    <Modal onClose={onResume}>\n      <MenuContainer>\n        <MenuButton {...register('button-resume-song', onResume)} ref={menuRef}>\n          Resume song\n        </MenuButton>\n        <MenuButton {...register('button-restart-song', onRestart)}>Restart song</MenuButton>\n        <MenuButton {...register('button-exit-song', onExit)}>Exit song</MenuButton>\n        <MenuButton {...register('input-settings', () => setIsInputModalOpen(true))}>Microphones settings</MenuButton>\n        <hr />\n        <InputLag ref={inputLagRef} {...register('input-lag', () => inputLagRef.current?.focus())} />\n      </MenuContainer>\n      {isInputModalOpen && (\n        <SelectInputModal onClose={() => setIsInputModalOpen(false)} closeButtonText={'Back to Pause Menu'} />\n      )}\n    </Modal>\n  );\n}\n\nconst Container = styled.div`\n  position: absolute;\n  z-index: 10;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n\n  display: flex;\n\n  align-items: center;\n  justify-content: center;\n`;\n","import { seconds, Song, SongPreview } from 'interfaces';\nimport getSongFirstNoteMs from 'Songs/utils/getSongFirstNoteMs';\nimport isDev from 'utils/isDev';\nimport isE2E from 'utils/isE2E';\n\nexport const SKIP_INTRO_MS = isDev() || isE2E() ? 1_000 : 8_000;\n\nexport default function getSkipIntroTime(song: Song | SongPreview): seconds {\n  return Math.floor((getSongFirstNoteMs(song) - SKIP_INTRO_MS) / 1000);\n}\n","import { Song, SongPreview } from 'interfaces';\nimport getSongFirstNoteMs from 'Songs/utils/getSongFirstNoteMs';\n\nconst SKIP_INTRO_THRESHOLD_MS = 20_000;\n\nexport default function songHasLongIntro(song: Song | SongPreview) {\n  const lyricStartMs = getSongFirstNoteMs(song);\n\n  return lyricStartMs - (song.videoGap ?? 0) * 1000 > SKIP_INTRO_THRESHOLD_MS;\n}\n","import styled from '@emotion/styled';\nimport { VideoPlayerRef } from 'Elements/VideoPlayer';\nimport { typography } from 'Elements/cssMixins';\nimport GameState from 'Scenes/Game/Singing/GameState/GameState';\nimport { MobilePhoneModeSetting, useSettingValue } from 'Scenes/Settings/SettingsState';\nimport getSkipIntroTime, { SKIP_INTRO_MS } from 'Songs/utils/getSkipIntroTime';\nimport getSongFirstNoteMs from 'Songs/utils/getSongFirstNoteMs';\nimport useKeyboard from 'hooks/useKeyboard';\nimport useKeyboardHelp from 'hooks/useKeyboardHelp';\nimport posthog from 'posthog-js';\nimport { useMemo } from 'react';\nimport songHasLongIntro from 'utils/songHasLongIntro';\n\ninterface Props {\n  playerRef: VideoPlayerRef | null;\n  isEnabled: boolean;\n}\n\nfunction SkipIntro({ playerRef, isEnabled }: Props) {\n  const [mobilePhoneMode] = useSettingValue(MobilePhoneModeSetting);\n  const song = GameState.getSong()!;\n  const hasLongIntro = useMemo(() => songHasLongIntro(song), [song]);\n  const songFirstNoteMs = useMemo(() => getSongFirstNoteMs(song), [song]);\n  const shouldBeVisible = GameState.getCurrentTime(false) < songFirstNoteMs - SKIP_INTRO_MS * 1.2;\n\n  const canSkip = isEnabled && shouldBeVisible && hasLongIntro;\n\n  const skipIntro = () => {\n    playerRef?.seekTo(getSkipIntroTime(song));\n\n    const { artist, title } = GameState.getSong()!;\n    posthog.capture('introSkipped', { name: `${artist} - ${title}`, artist, title });\n  };\n  useKeyboard({ accept: skipIntro }, canSkip);\n\n  const help = useMemo(\n    () => ({\n      accept: 'Skip Intro',\n      back: 'Pause Menu',\n    }),\n    [],\n  );\n  useKeyboardHelp(help, canSkip);\n\n  return !mobilePhoneMode && canSkip ? (\n    <Container visible={canSkip} data-test=\"skip-intro-info\">\n      Press <Kbd>Enter</Kbd> to skip the intro\n    </Container>\n  ) : null;\n}\n\nconst Container = styled.div<{ visible: boolean }>`\n  ${typography};\n  pointer-events: none;\n  position: fixed;\n  bottom: 29rem;\n  transform: scale(${(props) => (props.visible ? 1 : 0)});\n  opacity: ${(props) => (props.visible ? 1 : 0)};\n  text-align: center;\n  font-size: 5rem;\n  text-shadow: 0 0 3.5rem black;\n  width: 100%;\n  z-index: 4;\n  padding: 0.5rem;\n  transition: ease 500ms;\n`;\n\nconst Kbd = styled.kbd<{ disabled?: boolean }>`\n  margin: 0.2rem;\n  padding: 0.2rem 2rem;\n  border-radius: 1.3rem;\n  border: 0.5rem solid rgb(204, 204, 204);\n  border-bottom-color: rgb(150, 150, 150);\n  border-right-color: rgb(150, 150, 150);\n  line-height: 1.4;\n  display: inline-block;\n  background-color: rgb(247, 247, 247);\n  text-shadow: 0 1rem 0 #fff;\n\n  opacity: ${(props) => (props.disabled ? 0.25 : 1)};\n`;\n\nexport default SkipIntro;\n","import styled from '@emotion/styled';\nimport { typography } from 'Elements/cssMixins';\nimport GameState from 'Scenes/Game/Singing/GameState/GameState';\nimport beatToMs from 'Scenes/Game/Singing/GameState/Helpers/beatToMs';\nimport { MobilePhoneModeSetting, useSettingValue } from 'Scenes/Settings/SettingsState';\nimport { getLastNoteEnd } from 'Songs/utils/notesSelectors';\nimport useDebounce from 'hooks/useDebounce';\nimport useKeyboard from 'hooks/useKeyboard';\nimport useKeyboardHelp from 'hooks/useKeyboardHelp';\nimport posthog from 'posthog-js';\nimport React, { useMemo, useState } from 'react';\nimport { useInterval } from 'react-use';\n\ninterface Props {\n  onSongEnd: () => void;\n  isEnabled: boolean;\n}\n\nconst SHOW_OUTRO_THRESHOLD_MS = 15_000;\n\nfunction SkipOutro({ onSongEnd, isEnabled }: Props) {\n  const [mobilePhoneMode] = useSettingValue(MobilePhoneModeSetting);\n  const duration = GameState.getDuration();\n\n  const singingEndBeat = useMemo(\n    () => Math.max(...GameState.getPlayers().map((player) => getLastNoteEnd(player.getLastNotesSection()))),\n    [],\n  );\n\n  const canSkip = useMemo(() => {\n    const singingEndTime = beatToMs(singingEndBeat, GameState.getSong()!);\n\n    return isEnabled && duration * 1000 > singingEndTime + SHOW_OUTRO_THRESHOLD_MS;\n  }, [duration, singingEndBeat, isEnabled]);\n\n  const [currentBeat, setCurrentBeat] = useState(0);\n  const [skipping, setSkipping] = useState(false);\n\n  useInterval(() => setCurrentBeat(GameState.getCurrentBeat()), 1_000);\n\n  const shouldBeVisible = useDebounce(canSkip && currentBeat > singingEndBeat, 5_000) && !skipping;\n\n  const skipOutro = () => {\n    setSkipping(true);\n    setTimeout(onSongEnd, 700);\n\n    const { artist, title } = GameState.getSong()!;\n    posthog.capture('outroSkipped', { name: `${artist} - ${title}`, artist, title });\n  };\n  useKeyboard({ accept: skipOutro }, shouldBeVisible);\n\n  const help = useMemo(\n    () => ({\n      accept: 'Skip Outro',\n      back: 'Pause Menu',\n    }),\n    [],\n  );\n  useKeyboardHelp(help, shouldBeVisible);\n\n  return !mobilePhoneMode && canSkip ? (\n    <Container visible={shouldBeVisible}>\n      Press <Kbd>Enter</Kbd> to skip the outro\n    </Container>\n  ) : null;\n}\n\nconst Container = styled.div<{ visible: boolean }>`\n  ${typography};\n  pointer-events: none;\n  position: fixed;\n  bottom: 29rem;\n  transform: scale(${(props) => (props.visible ? 1 : 0)});\n  opacity: ${(props) => (props.visible ? 1 : 0)};\n  text-align: center;\n  font-size: 5rem;\n  text-shadow: 0 0 3.5rem black;\n  width: 100%;\n  z-index: 4;\n  padding: 0.5rem;\n  transition: ease 500ms;\n`;\n\nconst Kbd = styled.kbd<{ disabled?: boolean }>`\n  margin: 0.2rem;\n  padding: 0.2rem 2rem;\n  border-radius: 1.3rem;\n  border: 0.5rem solid rgb(204, 204, 204);\n  border-bottom-color: rgb(150, 150, 150);\n  border-right-color: rgb(150, 150, 150);\n  line-height: 1.4;\n  display: inline-block;\n  background-color: rgb(247, 247, 247);\n  text-shadow: 0 1rem 0 #fff;\n\n  opacity: ${(props) => (props.disabled ? 0.25 : 1)};\n`;\n\nexport default React.memo(SkipOutro);\n","import styled from '@emotion/styled';\nimport { getFirstNoteStartFromSections, getLastNoteEndFromSections } from 'Songs/utils/notesSelectors';\nimport { PlayerSetup } from 'interfaces';\nimport { uniq } from 'lodash-es';\nimport { useMemo } from 'react';\nimport GameState from '../../GameState/GameState';\nimport styles from '../Drawing/styles';\n\ninterface Props {\n  players: PlayerSetup[];\n}\n\nfunction DurationBar({ players }: Props) {\n  const currentTime = GameState.getCurrentTime(false);\n  const beatLength = GameState.getSongBeatLength();\n  const duration = GameState.getDuration();\n  const song = GameState.getSong()!;\n\n  const firstNotes = useMemo(\n    () =>\n      uniq(\n        song.tracks\n          .filter((v, index) => players.find((player) => player.track === index))\n          .map(({ sections }) => getFirstNoteStartFromSections(sections) * beatLength + song.gap),\n      ),\n    [song, beatLength, players],\n  );\n  const lastNotes = useMemo(\n    () =>\n      uniq(\n        song.tracks\n          .filter((v, index) => players.find((player) => player.track === index))\n          .map(({ sections }) => getLastNoteEndFromSections(sections) * beatLength + song.gap),\n      ),\n    [song, beatLength, players],\n  );\n\n  const durationMs = duration * 1000;\n\n  if (!currentTime || !duration) return null;\n\n  return (\n    <Bar>\n      {firstNotes.map((note) => (\n        <Marker key={note} position={note / durationMs} />\n      ))}\n      {lastNotes.map((note) => (\n        <Marker key={note} position={note / durationMs} />\n      ))}\n      <BarFill fill={currentTime / durationMs} />\n    </Bar>\n  );\n}\n\nconst Bar = styled.div`\n  position: absolute;\n  height: 0.6rem;\n  width: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  left: 0;\n  top: calc(50% - 0.3rem);\n`;\n\nconst BaseMarker = styled(Bar)`\n  top: 0;\n  margin-left: -0.25rem;\n  width: 0.5rem;\n  background: ${styles.colors.text.active};\n  opacity: 75%;\n`;\n\nconst Marker = (props: { position: number }) => (\n  <BaseMarker style={{ left: `${Math.min(props.position * 100, 100)}%` }} />\n);\n\nconst BaseBarFill = styled(Bar)`\n  top: 0;\n  background: white;\n  opacity: 50%;\n`;\n\nconst BarFill = (props: { fill: number }) => (\n  <BaseBarFill style={{ width: `${Math.round(props.fill * 10_000) / 100}%` }} />\n);\n\nexport default DurationBar;\n","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\"\n}), 'Error');\nexports.default = _default;","\"use strict\";\n\"use client\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"\n}), 'Warning');\nexports.default = _default;","import styled from '@emotion/styled';\nimport { ThumbUpAlt } from '@mui/icons-material';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport SignalCellularAltIcon from '@mui/icons-material/SignalCellularAlt';\nimport WarningIcon from '@mui/icons-material/Warning';\nimport { typography } from 'Elements/cssMixins';\nimport { inputStatus } from 'Scenes/Game/Singing/Input/Interface';\n\ninterface Props {\n  status: inputStatus;\n  tooltipPosition?: 'start' | 'end';\n}\n\nfunction PlayerStatus({ status, tooltipPosition = 'end', ...restProps }: Props) {\n  return (\n    <StatusContainer {...restProps}>\n      {status === 'ok' ? (\n        <ThumbUpAlt data-test=\"status-ok\" />\n      ) : status === 'unavailable' ? (\n        <UnavailableIcon data-test=\"status-unavailable\" />\n      ) : (\n        <UnstableIcon data-test=\"status-unstable\" />\n      )}\n      {status === 'unavailable' ? (\n        <StatusDescription position={tooltipPosition}>\n          <span>\n            The device is <strong>disconnected</strong>. Reconnect it, please.\n          </span>\n        </StatusDescription>\n      ) : status === 'unstable' ? (\n        <StatusDescription position={tooltipPosition}>\n          <span>\n            The connection seems <strong>unstable</strong>. Connect to the same Wifi.\n          </span>\n        </StatusDescription>\n      ) : null}\n    </StatusContainer>\n  );\n}\nexport default PlayerStatus;\n\nconst StatusContainer = styled.span`\n  position: absolute;\n  right: 0.5rem;\n  top: 0.5rem;\n  font-size: 3rem;\n  z-index: 10;\n  svg {\n    width: 3rem;\n    height: 3rem;\n    text-shadow: black;\n  }\n`;\n\nconst OkIcon = styled(SignalCellularAltIcon)`\n  fill: #ffffff;\n  stroke: black;\n  stroke-width: 1px;\n`;\n\nconst UnavailableIcon = styled(ErrorIcon)`\n  fill: #ff0000;\n`;\n\nconst UnstableIcon = styled(WarningIcon)`\n  fill: #f89400;\n  stroke: black;\n`;\n\nconst StatusDescription = styled.div<{ position: Props['tooltipPosition'] }>`\n  ${typography};\n  position: absolute;\n  ${(props) => (props.position === 'end' ? 'left: 100%' : 'right: 150%')};\n  top: -0.5rem;\n  font-size: 1.5rem;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  width: 25rem;\n  background: rgba(0, 0, 0, 0.75);\n  padding: 0.5rem;\n  margin-left: 2rem;\n`;\n","import { useEffect, useState } from 'react';\nimport InputManager from 'Scenes/Game/Singing/Input/InputManager';\nimport { inputStatus } from 'Scenes/Game/Singing/Input/Interface';\n\nconst usePlayerMicStatus = (\n  playerNumber: number,\n  intervalMs = 333,\n  onMeasure?: ([volume, frequency]: [number, number]) => void,\n) => {\n  const [data, setData] = useState<inputStatus>('ok');\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setData(InputManager.getInputStatus(playerNumber));\n    }, intervalMs);\n\n    return () => {\n      clearInterval(interval);\n    };\n  }, [playerNumber, intervalMs, onMeasure]);\n\n  return data;\n};\n\nexport default usePlayerMicStatus;\n","import styled from '@emotion/styled';\nimport { VolumeIndicator } from 'Elements/VolumeIndicator';\nimport { PlayerEntity } from 'Players/PlayersManager';\nimport InputManager from 'Scenes/Game/Singing/Input/InputManager';\nimport Ping from 'Scenes/SingASong/SongSelection/SongSettings/MicCheck/Ping';\nimport PlayerStatus from 'Scenes/SingASong/SongSelection/SongSettings/MicCheck/Status';\nimport usePlayerMicStatus from 'hooks/players/usePlayerMicStatus';\n\ninterface Props {\n  player: PlayerEntity;\n  bottom?: boolean;\n}\n\nfunction LyricsVolumeIndicator({ player, bottom = false }: Props) {\n  const playerVolume = InputManager.getPlayerVolume(player.number);\n  const status = usePlayerMicStatus(player.number);\n\n  return (\n    <Container>\n      {status !== 'unavailable' && <VolumeIndicator playerNumber={player.number} volume={playerVolume} />}\n      <StyledPlayerStatus status={status} tooltipPosition=\"start\" />\n      <StyledPing playerNumber={player.number} />\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  position: absolute;\n  width: 20rem;\n  right: 0;\n  top: 0;\n  height: 100%;\n`;\n\nconst StyledPlayerStatus = styled(PlayerStatus)`\n  top: auto;\n  right: 1rem;\n  bottom: 1rem;\n`;\nconst StyledPing = styled(Ping)`\n  z-index: 2;\n  font-size: 2rem;\n  margin-right: 1rem;\n  -webkit-text-stroke: 0.1rem black;\n  bottom: 1.5rem;\n`;\n\nexport default LyricsVolumeIndicator;\n","import styled from '@emotion/styled';\nimport SwapHorizIcon from '@mui/icons-material/SwapHoriz';\nimport { PlayerEntity } from 'Players/PlayersManager';\nimport LyricsVolumeIndicator from 'Scenes/Game/Singing/GameOverlay/Components/LyricsVolumeIndicator';\nimport { MobilePhoneModeSetting, useSettingValue } from 'Scenes/Settings/SettingsState';\nimport isNotesSection from 'Songs/utils/isNotesSection';\nimport { getFirstNoteStartFromSections } from 'Songs/utils/notesSelectors';\nimport { Note } from 'interfaces';\nimport { ComponentProps, Fragment, PropsWithChildren } from 'react';\nimport GameState from '../../GameState/GameState';\nimport styles from '../Drawing/styles';\n\ninterface Props {\n  player: PlayerEntity;\n  bottom?: boolean;\n  playerChanges: number[][];\n  effectsEnabled: boolean;\n}\n\nfunction Lyrics({ player, playerChanges, bottom = false, effectsEnabled }: Props) {\n  const playerState = GameState.getPlayer(player.number)!;\n  const [mobilePhoneMode] = useSettingValue(MobilePhoneModeSetting);\n  const playerColor = styles.colors.players[player.number].text;\n  const thisPlayerChanges = playerChanges[playerState.getTrackIndex()] ?? [];\n  const section = playerState.getCurrentSection();\n  const nextSection = playerState.getNextSection();\n  const subsequentSection = playerState.getNextSection(2);\n  const currentBeat = GameState.getCurrentBeat();\n  const beatLength = GameState.getSongBeatLength();\n\n  const previousChange = Math.max(0, ...thisPlayerChanges.filter((beat) => beat <= section?.start ?? -Infinity));\n  const nextChange = thisPlayerChanges.find((beat) => beat > section?.start ?? Infinity) ?? Infinity;\n  const timeToNextChange = (nextChange - currentBeat) * beatLength;\n\n  const passTheMicProgress = (nextChange - currentBeat) / (nextChange - previousChange);\n\n  const shouldBlink = timeToNextChange < 2500;\n\n  const hasNotes = isNotesSection(section);\n\n  const beatsBetweenSectionAndNote = hasNotes ? getFirstNoteStartFromSections([section]) - section.start : 0;\n\n  return (\n    <LyricsContainer shouldBlink={shouldBlink} bottom={bottom}>\n      {!mobilePhoneMode && effectsEnabled && <LyricsVolumeIndicator player={player} />}\n      {timeToNextChange < Infinity && (\n        <PassTheMicProgress color={playerColor} progress={passTheMicProgress <= 1 ? passTheMicProgress * 100 : 0} />\n      )}\n      {hasNotes ? (\n        <>\n          <LyricsLine data-test={`lyrics-current-player-${player.number}`} effectsEnabled={effectsEnabled}>\n            <HeadstartContainer>\n              <Headstart\n                color={playerColor}\n                percent={Math.min(2, (currentBeat - section.start) / beatsBetweenSectionAndNote)}\n              />\n            </HeadstartContainer>\n            {section?.notes.map((note) => {\n              const fill = effectsEnabled\n                ? Math.max(0, Math.min(2, (currentBeat - note.start) / note.length))\n                : currentBeat >= note.start\n                ? 1\n                : 0;\n              return (\n                <LyricContainer type={note.type} key={note.start}>\n                  <LyricActiveContainer>\n                    <LyricActive fill={fill} color={playerColor}>\n                      {note.lyrics.trim()}\n                    </LyricActive>\n                    {note.lyrics.endsWith(' ') && ' '}\n                  </LyricActiveContainer>\n                  {note.lyrics}\n                </LyricContainer>\n              );\n            })}\n            {nextSection?.start === nextChange && <PassTheMicSymbol shouldShake />}\n          </LyricsLine>\n        </>\n      ) : (\n        <LyricsLine effectsEnabled={effectsEnabled}>&nbsp;</LyricsLine>\n      )}\n      {isNotesSection(nextSection) ? (\n        <LyricsLine nextLine data-test={`lyrics-next-player-${player.number}`} effectsEnabled={effectsEnabled}>\n          {nextSection.notes.map((note) => (\n            <Fragment key={note.start}>{note.lyrics}</Fragment>\n          ))}\n          {subsequentSection?.start === nextChange && <PassTheMicSymbol />}\n        </LyricsLine>\n      ) : (\n        <LyricsLine effectsEnabled={effectsEnabled} nextLine>\n          &nbsp;\n        </LyricsLine>\n      )}\n    </LyricsContainer>\n  );\n}\n\nconst HeadstartContainer = styled.span`\n  position: relative;\n  height: 0;\n`;\n\nconst BaseHeadstart = styled.span`\n  position: absolute;\n  width: 15rem;\n  height: 3.1rem;\n  margin: 0.7rem 0;\n  right: 10rem;\n`;\n\nconst Headstart = ({ percent, color }: { percent: number; color: string }) => (\n  <BaseHeadstart\n    style={{\n      transformOrigin: 'right',\n      transform: `scaleX(${Math.min(1, 2 - percent)})`,\n      right: `${Math.max(0, 1 - percent) * 15}rem`,\n      background: `linear-gradient(270deg, rgba(${color}, 1) 0%, rgba(${color}, 0.5) 25%, rgba(${color}, 0) 100%)`,\n    }}\n  />\n);\n\nconst LyricsContainer = styled.div<{ shouldBlink: boolean; bottom: boolean }>`\n  @keyframes blink {\n    100% {\n      background-color: rgba(0, 0, 0, ${(props) => (props.bottom ? '0.85' : '0.5')});\n    }\n    30% {\n      background-color: rgba(0, 0, 0, ${(props) => (props.bottom ? '0.85' : '0.5')});\n    }\n    50% {\n      background-color: rgba(200, 200, 200, ${(props) => (props.bottom ? '0.85' : '0.5')});\n    }\n    30% {\n      background-color: rgba(0, 0, 0, ${(props) => (props.bottom ? '0.85' : '0.5')});\n    }\n    0% {\n      background-color: rgba(0, 0, 0, ${(props) => (props.bottom ? '0.85' : '0.5')});\n    }\n  }\n\n  box-sizing: border-box;\n\n  padding: 1rem;\n  background: rgba(0, 0, 0, ${(props) => (props.bottom ? '0.9' : '0.5')});\n  width: 100%;\n  text-align: center;\n  line-height: 1;\n  margin: 2rem 0;\n  position: relative;\n  ${(props) => (props.shouldBlink ? `animation: blink 350ms ease-in-out infinite both;` : ``)}\n`;\n\nconst LyricContainer = styled.span<{ type: Note['type'] }>`\n  font-style: ${(props) => (props.type === 'freestyle' ? 'italic' : 'normal')};\n`;\n\nconst LyricActiveContainer = styled.span`\n  position: absolute;\n  z-index: 1;\n`;\nconst BaseLyricActive = styled.span``;\n\nconst LyricActive = ({ fill, color, children }: PropsWithChildren<{ fill: number; color: string }>) => (\n  <BaseLyricActive\n    style={{\n      clipPath: `inset(0 ${(1 - (fill === 0 ? 0 : fill + 0.05)) * 100}% -5rem 0)`,\n      color: `rgb(${color})`,\n    }}>\n    {children}\n  </BaseLyricActive>\n);\n\nconst BasePassTheMicProgress = styled.div<{ color: string }>`\n  position: absolute;\n  height: 1rem;\n  background: rgb(${(props) => props.color});\n  width: 100%;\n`;\n\nconst PassTheMicProgress = (props: { progress: number } & ComponentProps<typeof BasePassTheMicProgress>) => (\n  <BasePassTheMicProgress\n    style={{\n      transformOrigin: 'left',\n      transform: `scaleX(${props.progress / 100})`,\n    }}\n    color={props.color}\n  />\n);\n\nconst PassTheMicSymbol = styled(SwapHorizIcon, { shouldForwardProp: (prop) => prop !== 'shouldShake' })<{\n  shouldShake?: boolean;\n}>`\n  @keyframes shake {\n    10%,\n    90% {\n      transform: translate3d(-0.1rem, 0, 0);\n    }\n\n    20%,\n    80% {\n      transform: translate3d(0.2rem, 0, 0);\n    }\n\n    30%,\n    50%,\n    70% {\n      transform: translate3d(-0.4rem, 0, 0);\n    }\n\n    40%,\n    60% {\n      transform: translate3d(0.4rem, 0, 0);\n    }\n  }\n\n  ${(props) => props.shouldShake && 'animation: shake 0.92s cubic-bezier(0.36, 0.07, 0.19, 0.97) both infinite;'}\n  margin-left: 2rem;\n  ${(props) => (props.shouldShake ? `fill: ${styles.colors.text.active};` : '')}\n  font-size: ${(props) => (props.shouldShake ? 4 : 3)}rem;\n`;\nconst LyricsLine = styled.div<{ nextLine?: boolean; effectsEnabled: boolean }>`\n  font-size: ${({ nextLine, effectsEnabled }) => (effectsEnabled ? 3.5 + (nextLine ? 0 : 1) : 2)}rem;\n  height: ${({ effectsEnabled }) => (effectsEnabled ? 4.5 : 2)}rem;\n  ${({ effectsEnabled }) => (!effectsEnabled ? '-webkit-text-stroke-width: 2px' : '')};\n\n  color: ${({ nextLine }) => (nextLine ? styles.colors.text.inactive : styles.colors.text.default)};\n\n  font-family: 'Comic Sans MS', 'Comic Sans', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans',\n    'Helvetica Neue', sans-serif;\n  z-index: 10;\n`;\n\nexport default Lyrics;\n","interface Props {\n  score: number;\n}\n\nexport const formatter = new Intl.NumberFormat(undefined, { maximumFractionDigits: 0 });\n\nexport default function ScoreText({ score }: Props) {\n  return <>{formatter.format(score)}</>;\n}\n","import { PlayerNote } from 'interfaces';\nimport styles from '../../styles';\n\nexport function getColor(\n  ctx: CanvasRenderingContext2D,\n  playerNumber: number,\n  isStar: boolean,\n  isHit: boolean,\n  isPerfect: boolean,\n) {\n  if (isPerfect && isStar) {\n    return styles.colors.players[playerNumber].starPerfect;\n  } else if (isPerfect) {\n    return styles.colors.players[playerNumber].perfect;\n  } else if (isStar && isHit) {\n    return styles.colors.players[playerNumber].star;\n  } else if (isHit) {\n    return styles.colors.players[playerNumber].hit;\n  } else {\n    return styles.colors.players[playerNumber].miss;\n  }\n}\n\nexport default function getNoteColor(\n  ctx: CanvasRenderingContext2D,\n  playerNumber: number,\n  isHit: boolean,\n  playerNote: PlayerNote,\n) {\n  return getColor(ctx, playerNumber, playerNote.note.type === 'star', isHit, playerNote.isPerfect);\n}\n","// This file is autogenerated. It's used to publish ESM to npm.\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\nvar trimLeft = /^\\s+/;\nvar trimRight = /\\s+$/;\nfunction tinycolor(color, opts) {\n  color = color ? color : \"\";\n  opts = opts || {};\n\n  // If input is already a tinycolor, return itself\n  if (color instanceof tinycolor) {\n    return color;\n  }\n  // If we are called as a function, call using new instead\n  if (!(this instanceof tinycolor)) {\n    return new tinycolor(color, opts);\n  }\n  var rgb = inputToRGB(color);\n  this._originalInput = color, this._r = rgb.r, this._g = rgb.g, this._b = rgb.b, this._a = rgb.a, this._roundA = Math.round(100 * this._a) / 100, this._format = opts.format || rgb.format;\n  this._gradientType = opts.gradientType;\n\n  // Don't let the range of [0,255] come back in [0,1].\n  // Potentially lose a little bit of precision here, but will fix issues where\n  // .5 gets interpreted as half of the total, instead of half of 1\n  // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n  if (this._r < 1) this._r = Math.round(this._r);\n  if (this._g < 1) this._g = Math.round(this._g);\n  if (this._b < 1) this._b = Math.round(this._b);\n  this._ok = rgb.ok;\n}\ntinycolor.prototype = {\n  isDark: function isDark() {\n    return this.getBrightness() < 128;\n  },\n  isLight: function isLight() {\n    return !this.isDark();\n  },\n  isValid: function isValid() {\n    return this._ok;\n  },\n  getOriginalInput: function getOriginalInput() {\n    return this._originalInput;\n  },\n  getFormat: function getFormat() {\n    return this._format;\n  },\n  getAlpha: function getAlpha() {\n    return this._a;\n  },\n  getBrightness: function getBrightness() {\n    //http://www.w3.org/TR/AERT#color-contrast\n    var rgb = this.toRgb();\n    return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n  },\n  getLuminance: function getLuminance() {\n    //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    var rgb = this.toRgb();\n    var RsRGB, GsRGB, BsRGB, R, G, B;\n    RsRGB = rgb.r / 255;\n    GsRGB = rgb.g / 255;\n    BsRGB = rgb.b / 255;\n    if (RsRGB <= 0.03928) R = RsRGB / 12.92;else R = Math.pow((RsRGB + 0.055) / 1.055, 2.4);\n    if (GsRGB <= 0.03928) G = GsRGB / 12.92;else G = Math.pow((GsRGB + 0.055) / 1.055, 2.4);\n    if (BsRGB <= 0.03928) B = BsRGB / 12.92;else B = Math.pow((BsRGB + 0.055) / 1.055, 2.4);\n    return 0.2126 * R + 0.7152 * G + 0.0722 * B;\n  },\n  setAlpha: function setAlpha(value) {\n    this._a = boundAlpha(value);\n    this._roundA = Math.round(100 * this._a) / 100;\n    return this;\n  },\n  toHsv: function toHsv() {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    return {\n      h: hsv.h * 360,\n      s: hsv.s,\n      v: hsv.v,\n      a: this._a\n    };\n  },\n  toHsvString: function toHsvString() {\n    var hsv = rgbToHsv(this._r, this._g, this._b);\n    var h = Math.round(hsv.h * 360),\n      s = Math.round(hsv.s * 100),\n      v = Math.round(hsv.v * 100);\n    return this._a == 1 ? \"hsv(\" + h + \", \" + s + \"%, \" + v + \"%)\" : \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \" + this._roundA + \")\";\n  },\n  toHsl: function toHsl() {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    return {\n      h: hsl.h * 360,\n      s: hsl.s,\n      l: hsl.l,\n      a: this._a\n    };\n  },\n  toHslString: function toHslString() {\n    var hsl = rgbToHsl(this._r, this._g, this._b);\n    var h = Math.round(hsl.h * 360),\n      s = Math.round(hsl.s * 100),\n      l = Math.round(hsl.l * 100);\n    return this._a == 1 ? \"hsl(\" + h + \", \" + s + \"%, \" + l + \"%)\" : \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \" + this._roundA + \")\";\n  },\n  toHex: function toHex(allow3Char) {\n    return rgbToHex(this._r, this._g, this._b, allow3Char);\n  },\n  toHexString: function toHexString(allow3Char) {\n    return \"#\" + this.toHex(allow3Char);\n  },\n  toHex8: function toHex8(allow4Char) {\n    return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n  },\n  toHex8String: function toHex8String(allow4Char) {\n    return \"#\" + this.toHex8(allow4Char);\n  },\n  toRgb: function toRgb() {\n    return {\n      r: Math.round(this._r),\n      g: Math.round(this._g),\n      b: Math.round(this._b),\n      a: this._a\n    };\n  },\n  toRgbString: function toRgbString() {\n    return this._a == 1 ? \"rgb(\" + Math.round(this._r) + \", \" + Math.round(this._g) + \", \" + Math.round(this._b) + \")\" : \"rgba(\" + Math.round(this._r) + \", \" + Math.round(this._g) + \", \" + Math.round(this._b) + \", \" + this._roundA + \")\";\n  },\n  toPercentageRgb: function toPercentageRgb() {\n    return {\n      r: Math.round(bound01(this._r, 255) * 100) + \"%\",\n      g: Math.round(bound01(this._g, 255) * 100) + \"%\",\n      b: Math.round(bound01(this._b, 255) * 100) + \"%\",\n      a: this._a\n    };\n  },\n  toPercentageRgbString: function toPercentageRgbString() {\n    return this._a == 1 ? \"rgb(\" + Math.round(bound01(this._r, 255) * 100) + \"%, \" + Math.round(bound01(this._g, 255) * 100) + \"%, \" + Math.round(bound01(this._b, 255) * 100) + \"%)\" : \"rgba(\" + Math.round(bound01(this._r, 255) * 100) + \"%, \" + Math.round(bound01(this._g, 255) * 100) + \"%, \" + Math.round(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n  },\n  toName: function toName() {\n    if (this._a === 0) {\n      return \"transparent\";\n    }\n    if (this._a < 1) {\n      return false;\n    }\n    return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n  },\n  toFilter: function toFilter(secondColor) {\n    var hex8String = \"#\" + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n    var secondHex8String = hex8String;\n    var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n    if (secondColor) {\n      var s = tinycolor(secondColor);\n      secondHex8String = \"#\" + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n    }\n    return \"progid:DXImageTransform.Microsoft.gradient(\" + gradientType + \"startColorstr=\" + hex8String + \",endColorstr=\" + secondHex8String + \")\";\n  },\n  toString: function toString(format) {\n    var formatSet = !!format;\n    format = format || this._format;\n    var formattedString = false;\n    var hasAlpha = this._a < 1 && this._a >= 0;\n    var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n    if (needsAlphaFormat) {\n      // Special case for \"transparent\", all other non-alpha formats\n      // will return rgba when there is transparency.\n      if (format === \"name\" && this._a === 0) {\n        return this.toName();\n      }\n      return this.toRgbString();\n    }\n    if (format === \"rgb\") {\n      formattedString = this.toRgbString();\n    }\n    if (format === \"prgb\") {\n      formattedString = this.toPercentageRgbString();\n    }\n    if (format === \"hex\" || format === \"hex6\") {\n      formattedString = this.toHexString();\n    }\n    if (format === \"hex3\") {\n      formattedString = this.toHexString(true);\n    }\n    if (format === \"hex4\") {\n      formattedString = this.toHex8String(true);\n    }\n    if (format === \"hex8\") {\n      formattedString = this.toHex8String();\n    }\n    if (format === \"name\") {\n      formattedString = this.toName();\n    }\n    if (format === \"hsl\") {\n      formattedString = this.toHslString();\n    }\n    if (format === \"hsv\") {\n      formattedString = this.toHsvString();\n    }\n    return formattedString || this.toHexString();\n  },\n  clone: function clone() {\n    return tinycolor(this.toString());\n  },\n  _applyModification: function _applyModification(fn, args) {\n    var color = fn.apply(null, [this].concat([].slice.call(args)));\n    this._r = color._r;\n    this._g = color._g;\n    this._b = color._b;\n    this.setAlpha(color._a);\n    return this;\n  },\n  lighten: function lighten() {\n    return this._applyModification(_lighten, arguments);\n  },\n  brighten: function brighten() {\n    return this._applyModification(_brighten, arguments);\n  },\n  darken: function darken() {\n    return this._applyModification(_darken, arguments);\n  },\n  desaturate: function desaturate() {\n    return this._applyModification(_desaturate, arguments);\n  },\n  saturate: function saturate() {\n    return this._applyModification(_saturate, arguments);\n  },\n  greyscale: function greyscale() {\n    return this._applyModification(_greyscale, arguments);\n  },\n  spin: function spin() {\n    return this._applyModification(_spin, arguments);\n  },\n  _applyCombination: function _applyCombination(fn, args) {\n    return fn.apply(null, [this].concat([].slice.call(args)));\n  },\n  analogous: function analogous() {\n    return this._applyCombination(_analogous, arguments);\n  },\n  complement: function complement() {\n    return this._applyCombination(_complement, arguments);\n  },\n  monochromatic: function monochromatic() {\n    return this._applyCombination(_monochromatic, arguments);\n  },\n  splitcomplement: function splitcomplement() {\n    return this._applyCombination(_splitcomplement, arguments);\n  },\n  // Disabled until https://github.com/bgrins/TinyColor/issues/254\n  // polyad: function (number) {\n  //   return this._applyCombination(polyad, [number]);\n  // },\n  triad: function triad() {\n    return this._applyCombination(polyad, [3]);\n  },\n  tetrad: function tetrad() {\n    return this._applyCombination(polyad, [4]);\n  }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function (color, opts) {\n  if (_typeof(color) == \"object\") {\n    var newColor = {};\n    for (var i in color) {\n      if (color.hasOwnProperty(i)) {\n        if (i === \"a\") {\n          newColor[i] = color[i];\n        } else {\n          newColor[i] = convertToPercentage(color[i]);\n        }\n      }\n    }\n    color = newColor;\n  }\n  return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n  var rgb = {\n    r: 0,\n    g: 0,\n    b: 0\n  };\n  var a = 1;\n  var s = null;\n  var v = null;\n  var l = null;\n  var ok = false;\n  var format = false;\n  if (typeof color == \"string\") {\n    color = stringInputToObject(color);\n  }\n  if (_typeof(color) == \"object\") {\n    if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n      rgb = rgbToRgb(color.r, color.g, color.b);\n      ok = true;\n      format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n    } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n      s = convertToPercentage(color.s);\n      v = convertToPercentage(color.v);\n      rgb = hsvToRgb(color.h, s, v);\n      ok = true;\n      format = \"hsv\";\n    } else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n      s = convertToPercentage(color.s);\n      l = convertToPercentage(color.l);\n      rgb = hslToRgb(color.h, s, l);\n      ok = true;\n      format = \"hsl\";\n    }\n    if (color.hasOwnProperty(\"a\")) {\n      a = color.a;\n    }\n  }\n  a = boundAlpha(a);\n  return {\n    ok: ok,\n    format: color.format || format,\n    r: Math.min(255, Math.max(rgb.r, 0)),\n    g: Math.min(255, Math.max(rgb.g, 0)),\n    b: Math.min(255, Math.max(rgb.b, 0)),\n    a: a\n  };\n}\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b) {\n  return {\n    r: bound01(r, 255) * 255,\n    g: bound01(g, 255) * 255,\n    b: bound01(b, 255) * 255\n  };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    l = (max + min) / 2;\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return {\n    h: h,\n    s: s,\n    l: l\n  };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n  var r, g, b;\n  h = bound01(h, 360);\n  s = bound01(s, 100);\n  l = bound01(l, 100);\n  function hue2rgb(p, q, t) {\n    if (t < 0) t += 1;\n    if (t > 1) t -= 1;\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\n    if (t < 1 / 2) return q;\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n  }\n  if (s === 0) {\n    r = g = b = l; // achromatic\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n  return {\n    r: r * 255,\n    g: g * 255,\n    b: b * 255\n  };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n  r = bound01(r, 255);\n  g = bound01(g, 255);\n  b = bound01(b, 255);\n  var max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  var h,\n    s,\n    v = max;\n  var d = max - min;\n  s = max === 0 ? 0 : d / max;\n  if (max == min) {\n    h = 0; // achromatic\n  } else {\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n  return {\n    h: h,\n    s: s,\n    v: v\n  };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hsvToRgb(h, s, v) {\n  h = bound01(h, 360) * 6;\n  s = bound01(s, 100);\n  v = bound01(v, 100);\n  var i = Math.floor(h),\n    f = h - i,\n    p = v * (1 - s),\n    q = v * (1 - f * s),\n    t = v * (1 - (1 - f) * s),\n    mod = i % 6,\n    r = [v, q, p, p, t, v][mod],\n    g = [t, v, v, q, p, p][mod],\n    b = [p, p, t, v, v, q][mod];\n  return {\n    r: r * 255,\n    g: g * 255,\n    b: b * 255\n  };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n  var hex = [pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16))];\n\n  // Return a 3 character hex if possible\n  if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n  }\n  return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n  var hex = [pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16)), pad2(convertDecimalToHex(a))];\n\n  // Return a 4 character hex if possible\n  if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n    return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n  }\n  return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n  var hex = [pad2(convertDecimalToHex(a)), pad2(Math.round(r).toString(16)), pad2(Math.round(g).toString(16)), pad2(Math.round(b).toString(16))];\n  return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n  if (!color1 || !color2) return false;\n  return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\ntinycolor.random = function () {\n  return tinycolor.fromRatio({\n    r: Math.random(),\n    g: Math.random(),\n    b: Math.random()\n  });\n};\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction _desaturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s -= amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\nfunction _saturate(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.s += amount / 100;\n  hsl.s = clamp01(hsl.s);\n  return tinycolor(hsl);\n}\nfunction _greyscale(color) {\n  return tinycolor(color).desaturate(100);\n}\nfunction _lighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l += amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\nfunction _brighten(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var rgb = tinycolor(color).toRgb();\n  rgb.r = Math.max(0, Math.min(255, rgb.r - Math.round(255 * -(amount / 100))));\n  rgb.g = Math.max(0, Math.min(255, rgb.g - Math.round(255 * -(amount / 100))));\n  rgb.b = Math.max(0, Math.min(255, rgb.b - Math.round(255 * -(amount / 100))));\n  return tinycolor(rgb);\n}\nfunction _darken(color, amount) {\n  amount = amount === 0 ? 0 : amount || 10;\n  var hsl = tinycolor(color).toHsl();\n  hsl.l -= amount / 100;\n  hsl.l = clamp01(hsl.l);\n  return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction _spin(color, amount) {\n  var hsl = tinycolor(color).toHsl();\n  var hue = (hsl.h + amount) % 360;\n  hsl.h = hue < 0 ? 360 + hue : hue;\n  return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction _complement(color) {\n  var hsl = tinycolor(color).toHsl();\n  hsl.h = (hsl.h + 180) % 360;\n  return tinycolor(hsl);\n}\nfunction polyad(color, number) {\n  if (isNaN(number) || number <= 0) {\n    throw new Error(\"Argument to polyad must be a positive number\");\n  }\n  var hsl = tinycolor(color).toHsl();\n  var result = [tinycolor(color)];\n  var step = 360 / number;\n  for (var i = 1; i < number; i++) {\n    result.push(tinycolor({\n      h: (hsl.h + i * step) % 360,\n      s: hsl.s,\n      l: hsl.l\n    }));\n  }\n  return result;\n}\nfunction _splitcomplement(color) {\n  var hsl = tinycolor(color).toHsl();\n  var h = hsl.h;\n  return [tinycolor(color), tinycolor({\n    h: (h + 72) % 360,\n    s: hsl.s,\n    l: hsl.l\n  }), tinycolor({\n    h: (h + 216) % 360,\n    s: hsl.s,\n    l: hsl.l\n  })];\n}\nfunction _analogous(color, results, slices) {\n  results = results || 6;\n  slices = slices || 30;\n  var hsl = tinycolor(color).toHsl();\n  var part = 360 / slices;\n  var ret = [tinycolor(color)];\n  for (hsl.h = (hsl.h - (part * results >> 1) + 720) % 360; --results;) {\n    hsl.h = (hsl.h + part) % 360;\n    ret.push(tinycolor(hsl));\n  }\n  return ret;\n}\nfunction _monochromatic(color, results) {\n  results = results || 6;\n  var hsv = tinycolor(color).toHsv();\n  var h = hsv.h,\n    s = hsv.s,\n    v = hsv.v;\n  var ret = [];\n  var modification = 1 / results;\n  while (results--) {\n    ret.push(tinycolor({\n      h: h,\n      s: s,\n      v: v\n    }));\n    v = (v + modification) % 1;\n  }\n  return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function (color1, color2, amount) {\n  amount = amount === 0 ? 0 : amount || 50;\n  var rgb1 = tinycolor(color1).toRgb();\n  var rgb2 = tinycolor(color2).toRgb();\n  var p = amount / 100;\n  var rgba = {\n    r: (rgb2.r - rgb1.r) * p + rgb1.r,\n    g: (rgb2.g - rgb1.g) * p + rgb1.g,\n    b: (rgb2.b - rgb1.b) * p + rgb1.b,\n    a: (rgb2.a - rgb1.a) * p + rgb1.a\n  };\n  return tinycolor(rgba);\n};\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function (color1, color2) {\n  var c1 = tinycolor(color1);\n  var c2 = tinycolor(color2);\n  return (Math.max(c1.getLuminance(), c2.getLuminance()) + 0.05) / (Math.min(c1.getLuminance(), c2.getLuminance()) + 0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function (color1, color2, wcag2) {\n  var readability = tinycolor.readability(color1, color2);\n  var wcag2Parms, out;\n  out = false;\n  wcag2Parms = validateWCAG2Parms(wcag2);\n  switch (wcag2Parms.level + wcag2Parms.size) {\n    case \"AAsmall\":\n    case \"AAAlarge\":\n      out = readability >= 4.5;\n      break;\n    case \"AAlarge\":\n      out = readability >= 3;\n      break;\n    case \"AAAsmall\":\n      out = readability >= 7;\n      break;\n  }\n  return out;\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function (baseColor, colorList, args) {\n  var bestColor = null;\n  var bestScore = 0;\n  var readability;\n  var includeFallbackColors, level, size;\n  args = args || {};\n  includeFallbackColors = args.includeFallbackColors;\n  level = args.level;\n  size = args.size;\n  for (var i = 0; i < colorList.length; i++) {\n    readability = tinycolor.readability(baseColor, colorList[i]);\n    if (readability > bestScore) {\n      bestScore = readability;\n      bestColor = tinycolor(colorList[i]);\n    }\n  }\n  if (tinycolor.isReadable(baseColor, bestColor, {\n    level: level,\n    size: size\n  }) || !includeFallbackColors) {\n    return bestColor;\n  } else {\n    args.includeFallbackColors = false;\n    return tinycolor.mostReadable(baseColor, [\"#fff\", \"#000\"], args);\n  }\n};\n\n// Big List of Colors\n// ------------------\n// <https://www.w3.org/TR/css-color-4/#named-colors>\nvar names = tinycolor.names = {\n  aliceblue: \"f0f8ff\",\n  antiquewhite: \"faebd7\",\n  aqua: \"0ff\",\n  aquamarine: \"7fffd4\",\n  azure: \"f0ffff\",\n  beige: \"f5f5dc\",\n  bisque: \"ffe4c4\",\n  black: \"000\",\n  blanchedalmond: \"ffebcd\",\n  blue: \"00f\",\n  blueviolet: \"8a2be2\",\n  brown: \"a52a2a\",\n  burlywood: \"deb887\",\n  burntsienna: \"ea7e5d\",\n  cadetblue: \"5f9ea0\",\n  chartreuse: \"7fff00\",\n  chocolate: \"d2691e\",\n  coral: \"ff7f50\",\n  cornflowerblue: \"6495ed\",\n  cornsilk: \"fff8dc\",\n  crimson: \"dc143c\",\n  cyan: \"0ff\",\n  darkblue: \"00008b\",\n  darkcyan: \"008b8b\",\n  darkgoldenrod: \"b8860b\",\n  darkgray: \"a9a9a9\",\n  darkgreen: \"006400\",\n  darkgrey: \"a9a9a9\",\n  darkkhaki: \"bdb76b\",\n  darkmagenta: \"8b008b\",\n  darkolivegreen: \"556b2f\",\n  darkorange: \"ff8c00\",\n  darkorchid: \"9932cc\",\n  darkred: \"8b0000\",\n  darksalmon: \"e9967a\",\n  darkseagreen: \"8fbc8f\",\n  darkslateblue: \"483d8b\",\n  darkslategray: \"2f4f4f\",\n  darkslategrey: \"2f4f4f\",\n  darkturquoise: \"00ced1\",\n  darkviolet: \"9400d3\",\n  deeppink: \"ff1493\",\n  deepskyblue: \"00bfff\",\n  dimgray: \"696969\",\n  dimgrey: \"696969\",\n  dodgerblue: \"1e90ff\",\n  firebrick: \"b22222\",\n  floralwhite: \"fffaf0\",\n  forestgreen: \"228b22\",\n  fuchsia: \"f0f\",\n  gainsboro: \"dcdcdc\",\n  ghostwhite: \"f8f8ff\",\n  gold: \"ffd700\",\n  goldenrod: \"daa520\",\n  gray: \"808080\",\n  green: \"008000\",\n  greenyellow: \"adff2f\",\n  grey: \"808080\",\n  honeydew: \"f0fff0\",\n  hotpink: \"ff69b4\",\n  indianred: \"cd5c5c\",\n  indigo: \"4b0082\",\n  ivory: \"fffff0\",\n  khaki: \"f0e68c\",\n  lavender: \"e6e6fa\",\n  lavenderblush: \"fff0f5\",\n  lawngreen: \"7cfc00\",\n  lemonchiffon: \"fffacd\",\n  lightblue: \"add8e6\",\n  lightcoral: \"f08080\",\n  lightcyan: \"e0ffff\",\n  lightgoldenrodyellow: \"fafad2\",\n  lightgray: \"d3d3d3\",\n  lightgreen: \"90ee90\",\n  lightgrey: \"d3d3d3\",\n  lightpink: \"ffb6c1\",\n  lightsalmon: \"ffa07a\",\n  lightseagreen: \"20b2aa\",\n  lightskyblue: \"87cefa\",\n  lightslategray: \"789\",\n  lightslategrey: \"789\",\n  lightsteelblue: \"b0c4de\",\n  lightyellow: \"ffffe0\",\n  lime: \"0f0\",\n  limegreen: \"32cd32\",\n  linen: \"faf0e6\",\n  magenta: \"f0f\",\n  maroon: \"800000\",\n  mediumaquamarine: \"66cdaa\",\n  mediumblue: \"0000cd\",\n  mediumorchid: \"ba55d3\",\n  mediumpurple: \"9370db\",\n  mediumseagreen: \"3cb371\",\n  mediumslateblue: \"7b68ee\",\n  mediumspringgreen: \"00fa9a\",\n  mediumturquoise: \"48d1cc\",\n  mediumvioletred: \"c71585\",\n  midnightblue: \"191970\",\n  mintcream: \"f5fffa\",\n  mistyrose: \"ffe4e1\",\n  moccasin: \"ffe4b5\",\n  navajowhite: \"ffdead\",\n  navy: \"000080\",\n  oldlace: \"fdf5e6\",\n  olive: \"808000\",\n  olivedrab: \"6b8e23\",\n  orange: \"ffa500\",\n  orangered: \"ff4500\",\n  orchid: \"da70d6\",\n  palegoldenrod: \"eee8aa\",\n  palegreen: \"98fb98\",\n  paleturquoise: \"afeeee\",\n  palevioletred: \"db7093\",\n  papayawhip: \"ffefd5\",\n  peachpuff: \"ffdab9\",\n  peru: \"cd853f\",\n  pink: \"ffc0cb\",\n  plum: \"dda0dd\",\n  powderblue: \"b0e0e6\",\n  purple: \"800080\",\n  rebeccapurple: \"663399\",\n  red: \"f00\",\n  rosybrown: \"bc8f8f\",\n  royalblue: \"4169e1\",\n  saddlebrown: \"8b4513\",\n  salmon: \"fa8072\",\n  sandybrown: \"f4a460\",\n  seagreen: \"2e8b57\",\n  seashell: \"fff5ee\",\n  sienna: \"a0522d\",\n  silver: \"c0c0c0\",\n  skyblue: \"87ceeb\",\n  slateblue: \"6a5acd\",\n  slategray: \"708090\",\n  slategrey: \"708090\",\n  snow: \"fffafa\",\n  springgreen: \"00ff7f\",\n  steelblue: \"4682b4\",\n  tan: \"d2b48c\",\n  teal: \"008080\",\n  thistle: \"d8bfd8\",\n  tomato: \"ff6347\",\n  turquoise: \"40e0d0\",\n  violet: \"ee82ee\",\n  wheat: \"f5deb3\",\n  white: \"fff\",\n  whitesmoke: \"f5f5f5\",\n  yellow: \"ff0\",\n  yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n  var flipped = {};\n  for (var i in o) {\n    if (o.hasOwnProperty(i)) {\n      flipped[o[i]] = i;\n    }\n  }\n  return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n  a = parseFloat(a);\n  if (isNaN(a) || a < 0 || a > 1) {\n    a = 1;\n  }\n  return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n  if (isOnePointZero(n)) n = \"100%\";\n  var processPercent = isPercentage(n);\n  n = Math.min(max, Math.max(0, parseFloat(n)));\n\n  // Automatically convert percentage into number\n  if (processPercent) {\n    n = parseInt(n * max, 10) / 100;\n  }\n\n  // Handle floating point rounding errors\n  if (Math.abs(n - max) < 0.000001) {\n    return 1;\n  }\n\n  // Convert into [0, 1] range if it isn't already\n  return n % max / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n  return Math.min(1, Math.max(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n  return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n  return typeof n == \"string\" && n.indexOf(\".\") != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n  return typeof n === \"string\" && n.indexOf(\"%\") != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n  return c.length == 1 ? \"0\" + c : \"\" + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n  if (n <= 1) {\n    n = n * 100 + \"%\";\n  }\n  return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n  return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n  return parseIntFromHex(h) / 255;\n}\nvar matchers = function () {\n  // <http://www.w3.org/TR/css3-values/#integers>\n  var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n  // <http://www.w3.org/TR/css3-values/#number-value>\n  var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n  // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n  var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n  // Actual matching.\n  // Parentheses and commas are optional, but not required.\n  // Whitespace can take the place of commas or opening paren\n  var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n  var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n  return {\n    CSS_UNIT: new RegExp(CSS_UNIT),\n    rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n    rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n    hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n    hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n    hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n    hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n    hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n    hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n    hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n  };\n}();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n  return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n  color = color.replace(trimLeft, \"\").replace(trimRight, \"\").toLowerCase();\n  var named = false;\n  if (names[color]) {\n    color = names[color];\n    named = true;\n  } else if (color == \"transparent\") {\n    return {\n      r: 0,\n      g: 0,\n      b: 0,\n      a: 0,\n      format: \"name\"\n    };\n  }\n\n  // Try to match string input using regular expressions.\n  // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n  // Just return an object and let the conversion functions handle that.\n  // This way the result will be the same whether the tinycolor is initialized with string or object.\n  var match;\n  if (match = matchers.rgb.exec(color)) {\n    return {\n      r: match[1],\n      g: match[2],\n      b: match[3]\n    };\n  }\n  if (match = matchers.rgba.exec(color)) {\n    return {\n      r: match[1],\n      g: match[2],\n      b: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hsl.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      l: match[3]\n    };\n  }\n  if (match = matchers.hsla.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      l: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hsv.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      v: match[3]\n    };\n  }\n  if (match = matchers.hsva.exec(color)) {\n    return {\n      h: match[1],\n      s: match[2],\n      v: match[3],\n      a: match[4]\n    };\n  }\n  if (match = matchers.hex8.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      a: convertHexToDecimal(match[4]),\n      format: named ? \"name\" : \"hex8\"\n    };\n  }\n  if (match = matchers.hex6.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1]),\n      g: parseIntFromHex(match[2]),\n      b: parseIntFromHex(match[3]),\n      format: named ? \"name\" : \"hex\"\n    };\n  }\n  if (match = matchers.hex4.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      a: convertHexToDecimal(match[4] + \"\" + match[4]),\n      format: named ? \"name\" : \"hex8\"\n    };\n  }\n  if (match = matchers.hex3.exec(color)) {\n    return {\n      r: parseIntFromHex(match[1] + \"\" + match[1]),\n      g: parseIntFromHex(match[2] + \"\" + match[2]),\n      b: parseIntFromHex(match[3] + \"\" + match[3]),\n      format: named ? \"name\" : \"hex\"\n    };\n  }\n  return false;\n}\nfunction validateWCAG2Parms(parms) {\n  // return valid WCAG2 parms for isReadable.\n  // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n  var level, size;\n  parms = parms || {\n    level: \"AA\",\n    size: \"small\"\n  };\n  level = (parms.level || \"AA\").toUpperCase();\n  size = (parms.size || \"small\").toLowerCase();\n  if (level !== \"AA\" && level !== \"AAA\") {\n    level = \"AA\";\n  }\n  if (size !== \"small\" && size !== \"large\") {\n    size = \"small\";\n  }\n  return {\n    level: level,\n    size: size\n  };\n}\n\nexport { tinycolor as default };\n","import tinycolor from 'tinycolor2';\nimport { randomInt } from 'utils/randomValue';\n\nconst cachedColors: Record<string, [string[], string[], string[]]> = {};\n\nconst getColors = (color: string) => {\n  if (!cachedColors[color]) {\n    const c = tinycolor(color);\n    cachedColors[color] = [\n      [c.setAlpha(0.8).toRgbString(), c.setAlpha(0.9).toRgbString(), c.setAlpha(1).toRgbString()],\n      [c.setAlpha(0).toRgbString()],\n      [c.setAlpha(0.1).toRgbString(), c.setAlpha(0.3).toRgbString(), c.setAlpha(0.2).toRgbString()],\n    ];\n  }\n\n  return cachedColors[color];\n};\n\nexport default function ray(\n  canvas: HTMLCanvasElement,\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  color: string | any,\n  alpha: number = 1,\n) {\n  if (width <= 0) return;\n\n  ctx.globalAlpha = 1;\n  const gradient = ctx.createRadialGradient(x, y, 0, x, y, width / 2);\n  const [cFirst, cLast, c0] = getColors(color);\n  gradient.addColorStop(0, cFirst[randomInt(0, cFirst.length - 1)]);\n  gradient.addColorStop(0.05, cFirst[randomInt(0, cFirst.length - 1)]);\n  gradient.addColorStop(0.15, c0[randomInt(0, c0.length - 1)]);\n  gradient.addColorStop(1, cLast[randomInt(0, cLast.length - 1)]);\n  ctx.beginPath();\n  ctx.arc(x, y, width / 2, 0, 2 * Math.PI);\n  ctx.closePath();\n  ctx.fillStyle = gradient;\n  ctx.fill();\n  ctx.fillStyle = color;\n  ctx.globalAlpha = 1;\n}\n","import ray from './ray';\n\nexport default function debris(\n  canvas: HTMLCanvasElement,\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  angle: number,\n  color: string | CanvasGradient | CanvasPattern,\n  alpha: number = 1,\n) {\n  if (width > 0) {\n    ray(canvas, ctx, x, y, width, height, color, alpha);\n  }\n}\n\nfunction triangle(\n  canvas: HTMLCanvasElement,\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  angle: number,\n  color: string | CanvasGradient | CanvasPattern,\n  alpha: number = 1,\n) {\n  ctx.save();\n\n  // move to the center of the canvas\n  const finalX = x - width / 2;\n  const finalY = y - height / 2;\n\n  ctx.translate(finalX, finalY);\n\n  // rotate the canvas to the specified degrees\n  ctx.rotate((angle * Math.PI) / 180);\n\n  ctx.globalAlpha = alpha;\n  ctx.fillStyle = color;\n  ctx.beginPath();\n  ctx.moveTo(0 - width / 2, height / 2);\n  ctx.lineTo(width / 2, height / 2);\n  ctx.lineTo(width / 2, 0);\n  ctx.lineTo(width / 2, 0 - height / 2);\n  ctx.fill();\n  ctx.globalAlpha = 1;\n  ctx.restore();\n}\n","const spreadValue = (initial: number, spread: number) => initial - spread + Math.random() * spread * 2;\n\nexport default spreadValue;\n\nexport const randomSign = (weight = 0) => Math.sign(weight + Math.random() - 0.5);\n","import debris from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/debris';\nimport spreadValue from 'Scenes/Game/Singing/GameOverlay/Drawing/Particles/utils';\nimport Particle from '../interfaces';\n\nconst baseTtlMs = 300;\nconst ttlSpreadMs = 50;\n\nconst velocityModifier = 1.3;\n\nexport default class SungTriangle implements Particle {\n  public finished = false;\n\n  private ttl;\n  private startingTtl;\n  private velocityX;\n  private velocityY;\n  private width;\n  private initialAngle;\n  private heightModifier;\n\n  constructor(private x: number, private y: number, private color: string) {\n    this.startingTtl = this.ttl = spreadValue(baseTtlMs, ttlSpreadMs);\n    this.velocityX = velocityModifier * Math.random() - velocityModifier / 2;\n    this.velocityY = velocityModifier * Math.random() - velocityModifier / 2;\n    this.width = 25;\n    this.initialAngle = 180 - Math.random() * 360;\n    this.heightModifier = 0.5 + Math.random() / 2;\n  }\n  public tick = (ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement, delta: number) => {\n    const percentage = 1 - this.ttl / this.startingTtl;\n    const ticksLeft = this.ttl;\n\n    const width = this.width * percentage;\n    const height = this.width * this.heightModifier * percentage;\n\n    const x = this.x - width / 2 + ticksLeft * this.velocityX;\n    const y = this.y + height / 2 + ticksLeft * this.velocityY;\n\n    debris(canvas, ctx, x, y, width, height, this.initialAngle + ticksLeft, this.color, 0.7 * percentage);\n\n    this.ttl = this.ttl - delta;\n    this.finished = this.ttl <= 0;\n  };\n}\n","const precisionMedium = `\r\nprecision mediump float;\r\n`;\r\nexport default precisionMedium.replace(/\\n/g, '');","const defaultAttributes = `\r\nattribute vec3 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n`;\r\nexport default defaultAttributes.replace(/\\n/g, '');","const defaultVaryings = `\r\nvarying vec3 vVertexPosition;\r\nvarying vec2 vTextureCoord;\r\n`;\r\nexport default defaultVaryings.replace(/\\n/g, '');","import precisionMedium from './chunks/precision.medium.glsl.js';\r\nimport defaultAttributes from './chunks/default.attributes.glsl.js';\r\nimport defaultVaryings from './chunks/default.varyings.glsl.js';\r\n\r\nconst planeVS = precisionMedium + defaultAttributes + defaultVaryings + `\r\nuniform mat4 uMVMatrix;\r\nuniform mat4 uPMatrix;\r\n\r\nvoid main() {\r\n    vTextureCoord = aTextureCoord;\r\n    vVertexPosition = aVertexPosition;\r\n    \r\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\r\n}\r\n`;\r\nexport default planeVS.replace(/\\n/g, '');","import precisionMedium from './chunks/precision.medium.glsl.js';\r\nimport defaultVaryings from './chunks/default.varyings.glsl.js';\r\n\r\nconst planeFS = precisionMedium + defaultVaryings + `\r\nvoid main() {\r\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\r\n}\r\n`;\r\nexport default planeFS.replace(/\\n/g, '');","import precisionMedium from './chunks/precision.medium.glsl.js';\r\nimport defaultAttributes from './chunks/default.attributes.glsl.js';\r\nimport defaultVaryings from './chunks/default.varyings.glsl.js';\r\n\r\nconst shaderPassVS = precisionMedium + defaultAttributes + defaultVaryings + `\r\nvoid main() {\r\n    vTextureCoord = aTextureCoord;\r\n    vVertexPosition = aVertexPosition;\r\n    \r\n    gl_Position = vec4(aVertexPosition, 1.0);\r\n}\r\n`;\r\nexport default shaderPassVS.replace(/\\n/g, '');","import precisionMedium from './chunks/precision.medium.glsl.js';\r\nimport defaultVaryings from './chunks/default.varyings.glsl.js';\r\n\r\nconst shaderPassFS = precisionMedium + defaultVaryings + `\r\nuniform sampler2D uRenderTexture;\r\n\r\nvoid main() {\r\n    gl_FragColor = texture2D(uRenderTexture, vTextureCoord);\r\n}\r\n`;\r\nexport default shaderPassFS.replace(/\\n/g, '');","import { FrequencyRecord, PlayerNote, Section, Song } from 'interfaces';\nimport isNotesSection from 'Songs/utils/isNotesSection';\n\nexport const pitchPadding = 6;\n\nexport const NOTE_HEIGHT = 30;\nexport const BIG_NOTE_HEIGHT = NOTE_HEIGHT + 6;\n\nconst getPlayerCanvas = (\n  drawingData: Pick<DrawingData, 'canvas' | 'playerCount' | 'playerIndex' | 'paddingVertical'>,\n) => {\n  const width = drawingData.canvas.width;\n  const height = drawingData.canvas.height;\n\n  // If the ratio is higher than 16/9 (e.g. 21/9), pad the excess horizontal space\n  // so in the end the notes are drawn over the same area as it would be on 16/9\n  const pixelsOverRatio = Math.max(0, (width - height * (16 / 9)) / 2);\n\n  const paddingHorizontal = 10 + (width - 2 * pixelsOverRatio) * 0.15 + pixelsOverRatio;\n\n  const paddedHeight = height - drawingData.paddingVertical * 2;\n\n  return {\n    width: width - paddingHorizontal * 2,\n    height: paddedHeight / drawingData.playerCount,\n    baseX: paddingHorizontal,\n    baseY: drawingData.paddingVertical + (drawingData.playerIndex * paddedHeight) / drawingData.playerCount,\n  };\n};\n\nexport default function calculateData({\n  canvas,\n  currentSectionIndex,\n  song,\n  songBeatLength,\n  minPitch,\n  maxPitch,\n  track,\n  playerIndex,\n  playerCount,\n  paddingVertical,\n}: DrawingData) {\n  const sections = song.tracks[track].sections;\n  const currentSection = sections[currentSectionIndex];\n  const nextSection = sections[currentSectionIndex + 1];\n\n  const playerCanvas = getPlayerCanvas({ canvas, playerCount, playerIndex, paddingVertical });\n\n  const lastNote = isNotesSection(currentSection) ? currentSection?.notes?.at(-1) : undefined;\n  const sectionEndBeat = isNotesSection(currentSection)\n    ? nextSection?.start ?? lastNote!.start + lastNote!.length\n    : currentSection.end;\n  const timeSectionGap = currentSection.start * songBeatLength;\n  const maxTime = (sectionEndBeat - currentSection.start) * songBeatLength;\n\n  const pitchStepHeight = (playerCanvas.height - 20 - NOTE_HEIGHT) / (maxPitch - minPitch + pitchPadding * 2);\n\n  return {\n    playerCanvas,\n    currentSection,\n    sectionEndBeat,\n    timeSectionGap,\n    maxTime,\n    pitchStepHeight,\n  };\n}\n\nexport interface DrawingData {\n  playerNumber: number;\n  playerIndex: number;\n  playerCount: number;\n  song: Song;\n  songBeatLength: number;\n  minPitch: number;\n  maxPitch: number;\n  canvas: HTMLCanvasElement;\n  currentTime: number;\n  currentSectionIndex: number;\n  frequencies: FrequencyRecord[];\n  playerNotes: PlayerNote[];\n  currentPlayerNotes: PlayerNote[];\n  track: number;\n\n  currentBeat: number;\n  paddingVertical: number;\n  currentSection: Section | undefined; // `undefined` can happen with `sectionShift` parameter\n}\n","function simpleRoundRect(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  radius: number,\n  fill: boolean,\n  stroke: boolean,\n) {\n  const actualWidth = Math.max(width, height / 2);\n  const actualRadius = Math.min(actualWidth / 2, height / 2, radius);\n\n  ctx.beginPath();\n  ctx.moveTo(x + actualRadius, y);\n  ctx.lineTo(x + actualWidth - actualRadius, y);\n  ctx.quadraticCurveTo(x + actualWidth, y, x + actualWidth, y + actualRadius);\n  ctx.lineTo(x + actualWidth, y + height - actualRadius);\n  ctx.quadraticCurveTo(x + actualWidth, y + height, x + actualWidth - actualRadius, y + height);\n  ctx.lineTo(x + actualRadius, y + height);\n  ctx.quadraticCurveTo(x, y + height, x, y + height - actualRadius);\n  ctx.lineTo(x, y + actualRadius);\n  ctx.quadraticCurveTo(x, y, x + actualRadius, y);\n  ctx.closePath();\n  if (fill) {\n    ctx.fill();\n  }\n  if (stroke) {\n    ctx.stroke();\n  }\n}\n\nexport default function roundRect(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  radius: number,\n  fill: boolean,\n  stroke: boolean,\n  glass = 0.1,\n) {\n  simpleRoundRect(ctx, x, y, width, height, radius, fill, stroke);\n\n  if (fill && glass > 0) {\n    ctx.save();\n    simpleRoundRect(ctx, x, y, width, height, radius, false, false);\n    ctx.clip();\n\n    ctx.fillStyle = `rgba(255,255,255,${glass})`;\n    ctx.fillRect(x, y, width, height / 2.2);\n\n    ctx.restore();\n  }\n}\n","export default function applyColor(\n  ctx: CanvasRenderingContext2D,\n  style: { fill: string; stroke: string; lineWidth: number },\n) {\n  ctx.fillStyle = style.fill;\n  ctx.strokeStyle = style.stroke;\n  ctx.lineWidth = style.lineWidth;\n}\n","import roundRect from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/roundRect';\nimport applyColor from 'Scenes/Game/Singing/GameOverlay/Drawing/applyColor';\nimport { Note } from 'interfaces';\nimport styles from '../../../styles';\n\nexport default function drawRawNote(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  noteType: Note['type'],\n) {\n  if (noteType === 'star') {\n    applyColor(ctx, styles.colors.lines.star);\n  } else if (noteType === 'freestyle' || noteType === 'rap') {\n    applyColor(ctx, styles.colors.lines.freestyle);\n  } else {\n    applyColor(ctx, styles.colors.lines.normal);\n  }\n\n  ctx.shadowBlur = 10;\n  ctx.shadowColor = 'rgb(31,31,31)';\n  ctx.shadowOffsetX = 0;\n  ctx.shadowOffsetY = 0;\n  roundRect(ctx!, x, y, width, height, 100, true, true, 0.075);\n\n  ctx.shadowBlur = 0;\n  ctx.shadowOffsetX = 0;\n  ctx.shadowOffsetY = 0;\n}\n","import applyColor from 'Scenes/Game/Singing/GameOverlay/Drawing/applyColor';\nimport roundRect from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/roundRect';\nimport * as test from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/utils/getNoteColor';\n\nexport default function drawRawPlayerNote(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  playerNumber: number,\n  isHit: boolean,\n  isPerfect: boolean,\n  isStar: boolean,\n) {\n  applyColor(ctx, test.getColor(ctx, playerNumber, isStar, isHit, isPerfect));\n\n  ctx.shadowBlur = 5;\n  ctx.shadowColor = 'rgba(31,31,31, .7)';\n  ctx.shadowOffsetX = 1;\n  ctx.shadowOffsetY = 1;\n  roundRect(ctx!, x, y, width, height, 100, true, true, isHit ? 0.15 : 0);\n  ctx.shadowBlur = 0;\n  ctx.shadowOffsetX = 0;\n  ctx.shadowOffsetY = 0;\n}\n","import { BIG_NOTE_HEIGHT, NOTE_HEIGHT } from 'Scenes/Game/Singing/GameOverlay/Drawing/calculateData';\nimport drawRawNote from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/Cache/Elements/note';\nimport drawRawPlayerNote from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/Cache/Elements/playerNote';\n\nconst SHADOW_PAD = 10;\n\nexport const smallNoteFragments = {\n  start: { x: 0, y: 0, w: NOTE_HEIGHT / 2 + SHADOW_PAD, h: NOTE_HEIGHT + SHADOW_PAD * 2 },\n  middle: { x: NOTE_HEIGHT / 2 + SHADOW_PAD, y: 0, w: 1, h: NOTE_HEIGHT + SHADOW_PAD * 2 },\n  end: {\n    x: NOTE_HEIGHT / 2 + 1 + SHADOW_PAD,\n    y: 0,\n    w: NOTE_HEIGHT / 2 + SHADOW_PAD,\n    h: NOTE_HEIGHT + SHADOW_PAD * 2,\n  },\n};\nexport const bigNoteFragments = {\n  start: { x: 0, y: 0, w: BIG_NOTE_HEIGHT / 2 + SHADOW_PAD, h: BIG_NOTE_HEIGHT + SHADOW_PAD * 2 },\n  middle: { x: BIG_NOTE_HEIGHT / 2 + SHADOW_PAD, y: 0, w: 1, h: BIG_NOTE_HEIGHT + SHADOW_PAD * 2 },\n  end: {\n    x: BIG_NOTE_HEIGHT / 2 + 1 + SHADOW_PAD,\n    y: 0,\n    w: BIG_NOTE_HEIGHT / 2 + SHADOW_PAD,\n    h: BIG_NOTE_HEIGHT + SHADOW_PAD * 2,\n  },\n};\n\nconst spriteMap = {\n  blueMiss: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawPlayerNote(ctx, x, y, w, h, 0, false, false, false),\n    width: NOTE_HEIGHT + 1,\n    height: NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: smallNoteFragments,\n  },\n  blueHit: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawPlayerNote(ctx, x, y, w, h, 0, true, false, false),\n    width: BIG_NOTE_HEIGHT + 1,\n    height: BIG_NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: bigNoteFragments,\n  },\n  bluePerfect: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawPlayerNote(ctx, x, y, w, h, 0, true, true, false),\n    width: BIG_NOTE_HEIGHT + 1,\n    height: BIG_NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: bigNoteFragments,\n  },\n  blueStarMiss: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawPlayerNote(ctx, x, y, w, h, 0, false, false, true),\n    width: NOTE_HEIGHT + 1,\n    height: NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: smallNoteFragments,\n  },\n  blueStarHit: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawPlayerNote(ctx, x, y, w, h, 0, true, false, true),\n    width: BIG_NOTE_HEIGHT + 1,\n    height: BIG_NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: bigNoteFragments,\n  },\n  blueStarPerfect: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawPlayerNote(ctx, x, y, w, h, 0, true, true, true),\n    width: BIG_NOTE_HEIGHT + 1,\n    height: BIG_NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: bigNoteFragments,\n  },\n  redMiss: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawPlayerNote(ctx, x, y, w, h, 1, false, false, false),\n    width: NOTE_HEIGHT + 1,\n    height: NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: smallNoteFragments,\n  },\n  redHit: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawPlayerNote(ctx, x, y, w, h, 1, true, false, false),\n    width: BIG_NOTE_HEIGHT + 1,\n    height: BIG_NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: bigNoteFragments,\n  },\n  redPerfect: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawPlayerNote(ctx, x, y, w, h, 1, true, true, false),\n    width: BIG_NOTE_HEIGHT + 1,\n    height: BIG_NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: bigNoteFragments,\n  },\n  redStarMiss: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawPlayerNote(ctx, x, y, w, h, 1, false, false, true),\n    width: NOTE_HEIGHT + 1,\n    height: NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: smallNoteFragments,\n  },\n  redStarHit: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawPlayerNote(ctx, x, y, w, h, 1, true, false, true),\n    width: BIG_NOTE_HEIGHT + 1,\n    height: BIG_NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: bigNoteFragments,\n  },\n  redStarPerfect: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawPlayerNote(ctx, x, y, w, h, 1, true, true, true),\n    width: BIG_NOTE_HEIGHT + 1,\n    height: BIG_NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: bigNoteFragments,\n  },\n  noteNormal: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawNote(ctx, x, y, w, h, 'normal'),\n    width: BIG_NOTE_HEIGHT + 1,\n    height: BIG_NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: bigNoteFragments,\n  },\n  noteStar: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawNote(ctx, x, y, w, h, 'star'),\n    width: BIG_NOTE_HEIGHT + 1,\n    height: BIG_NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: bigNoteFragments,\n  },\n  noteFreestyle: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawNote(ctx, x, y, w, h, 'freestyle'),\n    width: BIG_NOTE_HEIGHT + 1,\n    height: BIG_NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: bigNoteFragments,\n  },\n  noteRap: {\n    draw: (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number) =>\n      drawRawNote(ctx, x, y, w, h, 'rap'),\n    width: BIG_NOTE_HEIGHT + 1,\n    height: BIG_NOTE_HEIGHT,\n    padding: SHADOW_PAD,\n    fragments: bigNoteFragments,\n  },\n};\n\nexport type SpriteNames = keyof typeof spriteMap;\n\nexport default spriteMap;\n","// In tests this function is mocked so it creates node-canvas object\nexport default function createCanvas(w: number, h: number) {\n  const canvas = document.createElement('canvas');\n  canvas.width = w;\n  canvas.height = h;\n\n  return canvas;\n}\n","import spriteMap, {\n  smallNoteFragments,\n  SpriteNames,\n} from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/Cache/spriteMap';\nimport createCanvas from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/Cache/utils/createCanvas';\n\nconst maxWidth = Math.max(...Object.values(spriteMap).map((sprite) => sprite.padding * 2 + sprite.width));\nconst height = Object.values(spriteMap)\n  .map((sprite) => sprite.padding * 2 + sprite.height)\n  .reduce((a, e) => a + e, 0);\n\nconst cachedCanvas = createCanvas(maxWidth, height);\nconst ctx = cachedCanvas.getContext('2d')!;\n\nlet currentHeight = 0;\nconst positions = Object.entries(spriteMap)\n  .map(([name, sprite]) => {\n    const pads = sprite.padding * 2;\n    const position = { name, x: 0, y: currentHeight, w: sprite.width + pads, h: sprite.height + pads };\n    currentHeight = currentHeight + sprite.height + pads;\n\n    return position;\n  })\n  .reduce(\n    (acc, position) => ({ ...acc, [position.name]: position }),\n    {} as Record<SpriteNames, { x: number; y: number; w: number; h: number }>,\n  );\n\ncurrentHeight = 0;\nObject.entries(spriteMap).forEach(([key, entry]) => {\n  entry.draw(ctx, entry.padding, currentHeight + entry.padding, entry.width, entry.height);\n  currentHeight = currentHeight + entry.padding * 2 + entry.height;\n});\n\nexport const getSprite = (sprite: SpriteNames, fragment: keyof typeof smallNoteFragments) => {\n  return {\n    canvas: cachedCanvas,\n    ctx,\n    x: positions[sprite].x + spriteMap[sprite].fragments[fragment].x,\n    y: positions[sprite].y + spriteMap[sprite].fragments[fragment].y,\n    w: spriteMap[sprite].fragments[fragment].w,\n    h: spriteMap[sprite].fragments[fragment].h,\n    padding: spriteMap[sprite].padding,\n  };\n};\n\nexport const drawSprite = (\n  destCtx: CanvasRenderingContext2D,\n  sprite: SpriteNames,\n  fragment: keyof typeof smallNoteFragments,\n  destX: number,\n  destY: number,\n  destW?: number,\n  destH?: number,\n  paddingWScale = 1,\n  paddingHScale = 1,\n) => {\n  const spriteData = getSprite(sprite, fragment);\n  const { canvas, w, h, y, x, padding } = spriteData;\n  const finalWPadding = padding * paddingWScale;\n  const finalHPadding = padding * paddingHScale;\n\n  destCtx.imageSmoothingEnabled = false;\n  destCtx.drawImage(canvas, x, y, w, h, destX - finalWPadding, destY - finalHPadding, destW ?? w, destH ?? h);\n  destCtx.imageSmoothingEnabled = true;\n\n  return spriteData;\n};\n","import { drawSprite, getSprite } from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/Cache/cachedSprites';\nimport { SpriteNames } from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/Cache/spriteMap';\n\nexport default function drawSpriteWithStartAndEnd(\n  ctx: CanvasRenderingContext2D,\n  spriteName: SpriteNames,\n  x: number,\n  y: number,\n  width: number,\n) {\n  const startData = getSprite(spriteName, 'start');\n\n  const actualWidth = Math.max(width, (startData.h - startData.padding * 2) / 2);\n\n  const widthScale = Math.min(1, actualWidth / 2 / (startData.w - startData.padding));\n  const endingsWidth = widthScale * startData.w;\n  const endingsSize = endingsWidth - startData.padding * widthScale;\n\n  const middleSize = actualWidth - 2 * endingsSize;\n\n  drawSprite(ctx, spriteName, 'start', x, y, endingsWidth, undefined, widthScale);\n  if (middleSize > 0) {\n    drawSprite(ctx, spriteName, 'middle', x + endingsWidth, y, middleSize, undefined, widthScale);\n  }\n  drawSprite(ctx, spriteName, 'end', x + middleSize + endingsWidth, y, endingsWidth, undefined, widthScale);\n}\n","import { Note } from 'interfaces';\nimport { capitalize } from 'lodash-es';\nimport { SpriteNames } from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/Cache/spriteMap';\nimport drawSpriteWithStartAndEnd from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/spriteWithStartAndEnd';\n\nconst getSpriteName = (noteType: Note['type']) => {\n  return `note${capitalize(noteType)}` as SpriteNames;\n};\n\nexport default function drawNote(ctx: CanvasRenderingContext2D, x: number, y: number, width: number, note: Note) {\n  const spriteName = getSpriteName(note.type);\n\n  drawSpriteWithStartAndEnd(ctx, spriteName, x, y, width);\n}\n","import { PlayerNote } from 'interfaces';\nimport roundRect from './roundRect';\n\nexport default function drawPlayerFrequencyTrace(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  playerNote: PlayerNote,\n) {\n  ctx.save();\n  roundRect(ctx, x, y, width, height, 100, false, false);\n  ctx.clip();\n\n  ctx.beginPath();\n  ctx.strokeStyle = 'rgba(255,255,255, .35)';\n  ctx.lineWidth = 3;\n  ctx.lineJoin = 'round';\n\n  ctx.moveTo(x, y + height / 2 - (playerNote.frequencyRecords[0].preciseDistance * height) / 3);\n  for (let i = 1; i < playerNote.frequencyRecords.length; i++) {\n    ctx.lineTo(\n      x + i * (width / (playerNote.frequencyRecords.length - 1)),\n      y + height / 2 - (playerNote.frequencyRecords[i].preciseDistance * height) / 3,\n    );\n  }\n  ctx.stroke();\n  ctx.closePath();\n\n  ctx.restore();\n  ctx.lineJoin = 'miter';\n}\n","import { PlayerNote } from 'interfaces';\nimport { SpriteNames } from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/Cache/spriteMap';\nimport drawSpriteWithStartAndEnd from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/spriteWithStartAndEnd';\n\nconst getSpriteName = (playerNumber: number, isHit: boolean, isPerfect: boolean, isStar: boolean) => {\n  let spriteName = playerNumber === 0 ? 'blue' : 'red';\n  if (isPerfect && isStar) {\n    spriteName = `${spriteName}StarPerfect`;\n  } else if (isPerfect) {\n    spriteName = `${spriteName}Perfect`;\n  } else if (isStar && isHit) {\n    spriteName = `${spriteName}StarHit`;\n  } else if (isHit) {\n    spriteName = `${spriteName}Hit`;\n  } else if (isStar && !isHit) {\n    spriteName = `${spriteName}StarMiss`;\n  } else {\n    spriteName = `${spriteName}Miss`;\n  }\n\n  return spriteName as SpriteNames;\n};\n\nexport default function drawPlayerNote(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  playerNumber: number,\n  isHit: boolean,\n  playerNote: PlayerNote,\n) {\n  const spriteName = getSpriteName(playerNumber, isHit, playerNote.isPerfect, playerNote.note.type === 'star');\n\n  drawSpriteWithStartAndEnd(ctx, spriteName, x, y, width);\n}\n","import Particle from './interfaces';\n\nclass ParticleManager {\n  private particles: Particle[] = [];\n  private lastTick = Date.now();\n\n  private getTimeDelta = (timeShift: number) => {\n    const currentTick = Date.now() - timeShift;\n    const delta = currentTick - this.lastTick;\n    this.lastTick = currentTick;\n\n    return delta;\n  };\n\n  public tick = (ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement, timeShift = 0) => {\n    const delta = this.getTimeDelta(timeShift);\n\n    this.particles.forEach((particle) => particle.tick(ctx, canvas, delta));\n\n    this.particles = this.particles.filter((particle) => !particle.finished);\n  };\n\n  public add = (particle: Particle) => this.particles.push(particle);\n}\n\nexport default new ParticleManager();\n","import debris from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/debris';\nimport spreadValue, { randomSign } from 'Scenes/Game/Singing/GameOverlay/Drawing/Particles/utils';\nimport Particle from '../interfaces';\n\nconst baseTtl = (50 / 60) * 1000;\nconst ttlSpread = (25 / 60) * 1000;\n\nconst initialWidth = 60;\n\nconst velocityModifier = 0.3;\n\nexport default class TriangleParticle implements Particle {\n  public finished = false;\n\n  private ttl;\n  private startingTtl;\n  private velocityX;\n  private velocityY;\n  private width;\n  private initialAngle;\n  private heightModifier;\n\n  constructor(private x: number, private y: number, private color: string, private delay: number) {\n    this.startingTtl = this.ttl = spreadValue(baseTtl, ttlSpread);\n    this.velocityX = spreadValue(0.5, velocityModifier) * randomSign(0.2);\n    this.velocityY = spreadValue(0.4, velocityModifier) * randomSign();\n    this.width = initialWidth;\n    this.initialAngle = 180 - Math.random() * 360;\n    this.heightModifier = 0.5 + Math.random() / 2;\n  }\n  public tick = (ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement, delta: number) => {\n    if (this.delay-- > 0) return;\n\n    const percentage = this.ttl / this.startingTtl;\n    const elapsedTicks = this.startingTtl - this.ttl;\n\n    const width = this.width * percentage;\n    const height = this.width * this.heightModifier * percentage;\n\n    const x = this.x - width / 2 + elapsedTicks * this.velocityX;\n    const y = this.y - height / 2 + elapsedTicks * this.velocityY;\n\n    debris(canvas, ctx, x, y, width, height, this.initialAngle + elapsedTicks, this.color, 0.8 * percentage);\n\n    this.velocityX = this.velocityX - 0.009;\n    this.velocityY = this.velocityY * 1.0075;\n    this.ttl = this.ttl - delta;\n    this.finished = this.ttl <= 0;\n  };\n}\n","import { Note } from 'interfaces';\nimport tinycolor from 'tinycolor2';\nimport ParticleManager from '../ParticleManager';\nimport Particle from '../interfaces';\nimport styles from '../styles';\nimport TriangleParticle from './Triangle';\n\nexport default class ExplodingNoteParticle implements Particle {\n  public finished = true;\n\n  constructor(\n    x: number,\n    y: number,\n    width: number,\n    playerNumber: number,\n    note: Note,\n    particleManager: typeof ParticleManager,\n  ) {\n    const color =\n      note.type === 'star'\n        ? styles.colors.players[playerNumber].star.fill\n        : styles.colors.players[playerNumber].perfect.fill;\n\n    const lightColor = tinycolor(color).lighten(15).toRgbString();\n    const darkColor = tinycolor(color).darken(15).toRgbString();\n\n    const density = width / 8;\n    for (let i = 0; i < density; i++) {\n      const rand = Math.random();\n      let finalColor = color;\n      if (rand > 0.66) finalColor = lightColor;\n      else if (rand > 0.33) finalColor = darkColor;\n\n      const finalY = y + 20 * (Math.random() - 0.5);\n\n      particleManager.add(new TriangleParticle(x + i * 5, finalY, finalColor, (density - i) / 10));\n    }\n  }\n  public tick = (ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement) => {};\n}\n","import { BIG_NOTE_HEIGHT } from 'Scenes/Game/Singing/GameOverlay/Drawing/calculateData';\nimport { Note } from 'interfaces';\nimport drawNote from '../Elements/note';\nimport Particle from '../interfaces';\n\nconst initialTtl = 200;\n\nexport default class FadeoutNote implements Particle {\n  public finished = false;\n  public ttl = initialTtl;\n\n  constructor(private x: number, private y: number, private width: number, private note: Note) {}\n\n  public tick = (ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement, delta: number) => {\n    const percentage = this.ttl / initialTtl;\n\n    ctx.save();\n    ctx.globalAlpha = percentage;\n    ctx.translate(0, BIG_NOTE_HEIGHT * (1 - percentage));\n\n    drawNote(ctx, this.x, this.y, this.width, this.note);\n\n    ctx.globalAlpha = 1;\n    ctx.restore();\n\n    this.ttl = this.ttl - delta;\n    this.finished = this.ttl <= 0;\n  };\n}\n","import ray from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/ray';\nimport Particle from '../interfaces';\n\nconst initialTtl = (50 / 60) * 1000;\nconst velocity = 0.05;\n\nconst WIDTH = 200;\nconst WIDTH_SPREAD = 4;\n\nconst pow = Math.pow;\n\nfunction easeOutQuart(x: number): number {\n  return 1 - pow(1 - x, 2);\n}\n\nexport default class RayParticle implements Particle {\n  public finished = false;\n\n  private ttl;\n  private velocityX;\n  private velocityY;\n  private maxWidth;\n\n  constructor(private x: number, private y: number, seed: number, widthModifier: number) {\n    this.ttl = initialTtl;\n    this.velocityX = velocity * Math.random() - velocity / 2;\n    this.velocityY = velocity * Math.random() - velocity / 2;\n    this.maxWidth = Math.min(0.1 + widthModifier, 1) * (Math.sin(seed / 70) * WIDTH_SPREAD + (WIDTH - WIDTH_SPREAD));\n  }\n  public tick = (ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement, delta: number) => {\n    const percentage = this.ttl / initialTtl;\n    let easing = easeOutQuart(1 - Math.min(1, (1 - percentage) * 6));\n\n    const mainRayWidth = (this.maxWidth * easing * 3) / 4;\n    const mainRayHeight = this.maxWidth * easing;\n\n    ray(canvas, ctx, this.x, this.y, mainRayWidth, mainRayHeight, 'white', easing * 0.35);\n\n    easing = easeOutQuart(percentage);\n\n    const width = (easing * this.maxWidth) / 4;\n    const height = (easing * this.maxWidth) / 4;\n\n    const x = this.x;\n    const y = this.y;\n\n    const elapsedTicks = initialTtl - this.ttl;\n\n    ctx.globalAlpha = easing * 0.2;\n    ray(\n      canvas,\n      ctx,\n      x + elapsedTicks * this.velocityX,\n      y + elapsedTicks * this.velocityY,\n      width,\n      height,\n      'white',\n      easing * 0.2,\n    );\n\n    this.ttl = this.ttl - delta;\n    this.finished = this.ttl <= 0;\n  };\n}\n","import Particle from '../interfaces';\n\nconst INTERVAL_PX = 20;\n\nexport default class VibratoParticle implements Particle {\n  public finished = false;\n  public ttl = (2 / 60) * 1000;\n\n  constructor(private x: number, private y: number, private w: number, private h: number, private seed: number) {}\n  public tick = (ctx: CanvasRenderingContext2D, canvas: HTMLCanvasElement, delta: number) => {\n    ctx.strokeStyle = 'rgba(255,255,255,.25)';\n    ctx.lineWidth = 2;\n\n    ctx.beginPath();\n\n    for (let i = 0; i < this.w; i++) {\n      const x = this.x + this.w - i;\n      const deltaY = (this.h / 2 + 2) * Math.sin(x / INTERVAL_PX + this.seed / 250);\n      ctx.lineTo(x, this.y + this.h / 2 + deltaY);\n    }\n\n    ctx.stroke();\n\n    ctx.beginPath();\n\n    for (let i = 0; i < this.w; i++) {\n      const x = this.x + this.w - i;\n      const deltaY = -1 * (this.h / 2 + 2) * Math.sin(x / INTERVAL_PX + this.seed / 250);\n      ctx.lineTo(x, this.y + this.h / 2 + deltaY);\n    }\n\n    ctx.stroke();\n\n    this.ttl = this.ttl - delta;\n    this.finished = this.ttl <= 0;\n  };\n}\n","import { captureException } from '@sentry/react';\nimport events from 'GameEvents/GameEvents';\nimport PlayersManager from 'Players/PlayersManager';\nimport getNoteColor from 'Scenes/Game/Singing/GameOverlay/Drawing/Elements/utils/getNoteColor';\nimport SungTriangle from 'Scenes/Game/Singing/GameOverlay/Drawing/Particles/SungTriangle';\nimport { Shaders } from 'Scenes/Game/Singing/GameOverlay/Drawing/Shaders/Shaders';\nimport { FPSCountSetting, GraphicSetting } from 'Scenes/Settings/SettingsState';\nimport isNotesSection from 'Songs/utils/isNotesSection';\nimport { noDistanceNoteTypes } from 'consts';\nimport { Note, NotesSection, PlayerNote } from 'interfaces';\nimport { randomFloat } from 'utils/randomValue';\nimport GameState from '../../GameState/GameState';\nimport getPlayerNoteDistance from '../../Helpers/getPlayerNoteDistance';\nimport debugPitches from './Elements/debugPitches';\nimport drawNote from './Elements/note';\nimport drawPlayerFrequencyTrace from './Elements/playerFrequencyTrace';\nimport drawPlayerNote from './Elements/playerNote';\nimport ParticleManager from './ParticleManager';\nimport ExplodingNoteParticle from './Particles/ExplodingNote';\nimport FadeoutNote from './Particles/FadeoutNote';\nimport RayParticle from './Particles/Ray';\nimport VibratoParticle from './Particles/Vibrato';\nimport calculateData, { BIG_NOTE_HEIGHT, DrawingData, NOTE_HEIGHT, pitchPadding } from './calculateData';\n\nconst MAX_LOOKUP_RANGE = 20;\nfunction getPlayerNoteAtBeat(playerNotes: PlayerNote[], beat: number) {\n  return playerNotes.find((note) => note.start <= beat && note.start + note.length >= beat);\n}\n\nexport default class CanvasDrawing {\n  private loop = false;\n  private pauseTime = 0;\n  private pausedOn = 0;\n\n  public constructor(\n    private canvas: HTMLCanvasElement,\n    private verticalMargin: number = 0,\n    private scaleFactor: number = 1,\n  ) {}\n\n  private shaders: Shaders | null = null;\n  public start = () => {\n    events.sectionChange.subscribe(this.onSectionEnd);\n    this.loop = true;\n\n    this.drawFrame();\n\n    if (false && GraphicSetting.get() === 'high') {\n      try {\n        this.shaders = new Shaders(this.canvas);\n      } catch (e) {\n        captureException(e);\n      }\n    }\n  };\n\n  public pause = () => {\n    this.end();\n    this.pausedOn = Date.now();\n  };\n\n  public resume = () => {\n    this.pauseTime += Date.now() - this.pausedOn;\n    this.start();\n  };\n\n  public end = () => {\n    this.loop = false;\n\n    this.shaders?.cleanup();\n    events.sectionChange.unsubscribe(this.onSectionEnd);\n  };\n\n  public isPlaying = () => this.loop;\n\n  public drawFrame = () => {\n    const startTime = Date.now();\n    const ctx = this.canvas.getContext('2d');\n    if (!ctx) return;\n\n    if (GameState.isPlaying()) {\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n      const players = PlayersManager.getPlayers();\n      players.forEach((player, index) => {\n        this.drawPlayer(player.number, ctx);\n      });\n\n      ParticleManager.tick(ctx, this.canvas, this.pauseTime);\n    }\n\n    if (FPSCountSetting.get() === 30) {\n      const endTime = Date.now();\n      const baseTimeout = 1000 / 30;\n      const finalTimeout = endTime - startTime > baseTimeout ? baseTimeout : baseTimeout - (endTime - startTime);\n      if (this.loop) setTimeout(this.drawFrame, finalTimeout, FPSCountSetting.get());\n    }\n    if (FPSCountSetting.get() !== 30) {\n      if (this.loop) window.requestAnimationFrame(this.drawFrame);\n    }\n  };\n\n  private drawPlayer = (playerNumber: number, ctx: CanvasRenderingContext2D) => {\n    const drawingData = this.getDrawingData(playerNumber);\n    const { currentSection } = calculateData(drawingData);\n\n    if (GraphicSetting.get() === 'high') {\n      this.setDistortionForce(drawingData);\n    }\n\n    if (!isNotesSection(currentSection)) return;\n\n    const displacements = this.calculateDisplacements(currentSection, drawingData);\n\n    this.drawNotesToSing(ctx, drawingData, displacements);\n    this.drawSungNotes(ctx, drawingData, displacements);\n\n    if (GraphicSetting.get() === 'high') {\n      this.drawFlare(ctx, drawingData, displacements);\n    }\n\n    false && debugPitches(ctx!, drawingData);\n  };\n\n  private setDistortionForce = (drawingData: DrawingData) => {\n    const currentSection = drawingData.currentSection;\n\n    if (!isNotesSection(currentSection)) {\n      this.shaders?.updatePlayerForce(\n        drawingData.playerNumber,\n        (this.shaders?.getPlayerForce(drawingData.playerNumber) ?? 0) * 0.99,\n      );\n    } else {\n      const max = Math.max(0, drawingData.currentBeat - MAX_LOOKUP_RANGE);\n\n      const sungNotes = drawingData.currentPlayerNotes\n        .filter((note) => note.note.start + note.note.length >= max)\n        .filter((note) => getPlayerNoteDistance(note) === 0)\n        .reduce((curr, note) => curr + note.length - Math.max(0, max - note.start), 0);\n\n      const lastPlayerNote = drawingData.currentPlayerNotes.at(-1);\n      const lastPlayerNoteEnd = (lastPlayerNote?.start ?? 0) + (lastPlayerNote?.length ?? 0);\n      const beatsSinceLastHit = drawingData.currentBeat - lastPlayerNoteEnd;\n\n      const forcePercent = Math.max(\n        Math.min(Math.pow((sungNotes - beatsSinceLastHit / 1.5) / MAX_LOOKUP_RANGE, 3), 0.98),\n        0,\n      );\n      this.shaders?.updatePlayerForce(drawingData.playerNumber, forcePercent);\n    }\n  };\n\n  private drawNotesToSing = (\n    ctx: CanvasRenderingContext2D,\n    drawingData: DrawingData,\n    displacements: Record<number, [number, number]>,\n  ) => {\n    if (!isNotesSection(drawingData.currentSection)) return;\n\n    drawingData.currentSection.notes.forEach((note) => {\n      const { x, y, w, h } = this.getNoteCoords(drawingData, note, note.pitch, true, displacements[note.start]);\n\n      drawNote(ctx, x, y, w, note);\n    });\n  };\n\n  private drawSungNotes = (\n    ctx: CanvasRenderingContext2D,\n    drawingData: DrawingData,\n    displacements: Record<number, [number, number]>,\n  ) => {\n    if (!isNotesSection(drawingData.currentSection)) return;\n\n    drawingData.currentPlayerNotes.forEach((playerNote) => {\n      const distance = getPlayerNoteDistance(playerNote);\n\n      const { x, y, w, h } = this.getNoteCoords(\n        drawingData,\n        playerNote,\n        playerNote.note.pitch + distance,\n        distance === 0,\n        displacements[playerNote.note.start],\n      );\n      if (distance > 0 || w > h / 2.5) {\n        drawPlayerNote(ctx, x, y, w, drawingData.playerNumber, distance === 0, playerNote);\n\n        if (playerNote.vibrato) {\n          ParticleManager.add(new VibratoParticle(x, y, w, h, drawingData.currentTime));\n        }\n\n        if (\n          distance === 0 &&\n          playerNote.frequencyRecords.length > 3 &&\n          !noDistanceNoteTypes.includes(playerNote.note.type)\n        ) {\n          drawPlayerFrequencyTrace(ctx, x, y, w, h, playerNote);\n        }\n      }\n    });\n  };\n\n  private drawFlare = (\n    ctx: CanvasRenderingContext2D,\n    drawingData: DrawingData,\n    displacements: Record<number, [number, number]>,\n  ) => {\n    if (!isNotesSection(drawingData.currentSection)) return;\n\n    const lastNote = getPlayerNoteAtBeat(\n      drawingData.currentPlayerNotes,\n      drawingData.currentBeat - 185 / drawingData.songBeatLength,\n    );\n\n    if (lastNote && lastNote.distance === 0) {\n      const displacement = displacements[lastNote.note.start] || [0, 0];\n\n      const { x, y, w, h } = this.getNoteCoords(drawingData, lastNote, lastNote.note.pitch, true, displacement);\n      const preciseDistance = noDistanceNoteTypes.includes(lastNote.note.type)\n        ? 0\n        : lastNote.frequencyRecords.at(-1)!.preciseDistance;\n\n      const finalX = x + w;\n      const finalY = this.getPreciseY(y, h, preciseDistance);\n\n      ParticleManager.add(new RayParticle(finalX, finalY, drawingData.currentTime, 1));\n\n      ParticleManager.add(\n        new SungTriangle(\n          randomFloat(Math.max(x, finalX - 50), finalX),\n          finalY,\n          getNoteColor(ctx, drawingData.playerNumber, true, lastNote).fill,\n        ),\n      );\n\n      this.shaders?.updatePlayerCenter(drawingData.playerNumber, finalX, finalY);\n    }\n  };\n\n  private onSectionEnd = (playerNumber: number) => {\n    if (GameState.isPlaying()) {\n      const drawingData = this.getDrawingData(playerNumber, -1);\n      if (!isNotesSection(drawingData.currentSection)) return;\n\n      this.fadeoutNotes(drawingData.currentSection, drawingData);\n      this.explodeNotes(drawingData.currentSection, drawingData);\n    }\n  };\n\n  private fadeoutNotes = (section: NotesSection, drawingData: DrawingData) => {\n    if (GraphicSetting.get() === 'high') {\n      section.notes.forEach((note) => {\n        const { x, y, w, h } = this.getNoteCoords(drawingData, note, note.pitch, true);\n\n        ParticleManager.add(new FadeoutNote(x, y, w, note));\n      });\n    }\n  };\n\n  private explodeNotes = (section: NotesSection, drawingData: DrawingData) => {\n    if (GraphicSetting.get() === 'high') {\n      const notesToExplode = drawingData.playerNotes.filter(\n        (note) =>\n          (note.distance === 0 || noDistanceNoteTypes.includes(note.note.type)) && section.notes.includes(note.note),\n      );\n\n      notesToExplode.forEach((note) => {\n        const { x, y, w, h } = this.getNoteCoords(drawingData, note, note.note.pitch, true);\n        ParticleManager.add(\n          new ExplodingNoteParticle(x, y + h / 2, w, drawingData.playerNumber, note.note, ParticleManager),\n        );\n      });\n    }\n  };\n\n  private calculateDisplacements = (currentSection: NotesSection, drawingData: DrawingData) => {\n    const displacements: Record<number, [number, number]> = {};\n\n    if (GraphicSetting.get() === 'high') {\n      currentSection.notes.forEach((note) => {\n        const sungNotesStreak = drawingData.playerNotes\n          .filter((sungNote) => sungNote.note.start === note.start)\n          .filter(\n            (sungNote) =>\n              sungNote.note.start + sungNote.note.length + 30 >= drawingData.currentBeat && sungNote.distance === 0,\n          )\n          .map((sungNote) =>\n            sungNote.start + 30 < drawingData.currentBeat\n              ? sungNote.length - (drawingData.currentBeat - 30 - sungNote.start)\n              : sungNote.length,\n          )\n          .reduce((currLength, sungNoteLength) => Math.min(currLength + sungNoteLength, 30), 0);\n\n        const displacementRange = Math.max(0, (sungNotesStreak - 5) / (note.type === 'star' ? 3 : 5));\n        const displacementX = (Math.random() - 0.5) * displacementRange;\n        const displacementY = (Math.random() - 0.5) * displacementRange;\n\n        displacements[note.start] = [displacementX, displacementY];\n      });\n    } else {\n      currentSection.notes.forEach((note) => {\n        displacements[note.start] = [0, 0];\n      });\n    }\n\n    return displacements;\n  };\n\n  private getDrawingData = (playerNumber: number, sectionShift = 0): DrawingData => {\n    const players = PlayersManager.getPlayers();\n    const playerIndex = players.findIndex((player) => player.number === playerNumber);\n    const playerCount = players.length;\n\n    const playerState = GameState.getPlayer(playerNumber)!;\n    const currentSectionIndex = playerState.getCurrentSectionIndex() + sectionShift ?? 0;\n    const song = GameState.getSong()!;\n    const track = playerState.getTrackIndex();\n    const currentSection = song.tracks[track].sections[currentSectionIndex];\n    const playerNotes = playerState.getPlayerNotes();\n\n    return {\n      playerNumber,\n      playerIndex,\n      playerCount,\n      song,\n      songBeatLength: GameState.getSongBeatLength(),\n      minPitch: playerState.getMinPitch(),\n      maxPitch: playerState.getMaxPitch(),\n      canvas: this.canvas,\n      currentTime: GameState.getCurrentTime(),\n      frequencies: playerState.getPlayerFrequencies(),\n      playerNotes,\n      currentPlayerNotes: playerNotes.filter((note) => note.note.start >= (currentSection?.start ?? Infinity)),\n      track: playerState.getTrackIndex(),\n      currentBeat: GameState.getCurrentBeat(),\n      currentSectionIndex,\n      currentSection,\n      paddingVertical: this.verticalMargin,\n    };\n  };\n\n  private getNoteCoords = (\n    drawingData: DrawingData,\n    { start, length }: Pick<Note, 'start' | 'length'>,\n    pitch: number,\n    big: boolean,\n    displacement: [number, number] = [0, 0],\n  ) => {\n    const { sectionEndBeat, currentSection, playerCanvas, pitchStepHeight } = calculateData(drawingData);\n\n    const sectionStart = isNotesSection(currentSection) ? currentSection.notes[0].start : 1;\n\n    const beatLength = playerCanvas.width / (sectionEndBeat - sectionStart);\n\n    const [dx, dy] = big ? displacement : [0, 0];\n    const pitchY = pitchStepHeight * (drawingData.maxPitch - pitch + pitchPadding);\n\n    return {\n      x: Math.floor(playerCanvas.baseX + beatLength * (start - sectionStart) + dx),\n      y: Math.floor(playerCanvas.baseY + 10 + pitchY + dy - (big ? 3 : 0)),\n      w: Math.floor(beatLength * length),\n      h: big ? BIG_NOTE_HEIGHT : NOTE_HEIGHT,\n    };\n  };\n\n  private getPreciseY = (y: number, h: number, preciseDistance: number) => y + h / 2 - (preciseDistance * h) / 3;\n}\n","export default \"precision mediump float;\\n\\nconst float MAX_FORCE = 300.0;\\nconst int SAMPLE_COUNT = 8; // 2^x\\nconst float INTENSITY = 0.051;\\n// get our varyings\\nvarying vec3 vVertexPosition;\\nvarying vec2 vTextureCoord;\\n// the uniform we declared inside our javascript\\nuniform float uTime;\\nuniform sampler2D planeTexture;\\nuniform vec2 uResolution;\\n\\nuniform vec2 uP0center;\\nuniform float uP0force;\\n\\nuniform vec2 uP1center;\\nuniform float uP1force;\\n\\nfloat rnd(float n) {\\n    return fract(sin(n) * 43758.5453);\\n}\\nfloat random (vec2 st) {\\n    return rnd(dot(st.xy, vec2(12.9898, 78.233)));\\n}\\n\\nvec4 directionalBlur(in vec2 uv, in vec2 direction, in float intensity)\\n{\\n    vec4 color = vec4(0.0);\\n\\n    for (int i=1; i<=SAMPLE_COUNT; i++)\\n    {\\n        color += texture2D(planeTexture,uv+float(i)*intensity/float(SAMPLE_COUNT)*direction);\\n    }\\n\\n    return color/float(SAMPLE_COUNT);\\n}\\n\\nfloat distort(vec2 center, float force, float comparedIntensity) {\\n    float actualForce = force * MAX_FORCE;\\n    vec2 centerAbs = center * uResolution;\\n\\n    vec2 direction = gl_FragCoord.xy - centerAbs.xy;\\n    float dist = length(direction) / length(uResolution);\\n\\n\\n    float intensity = max(0.0, 0.50 - dist) * INTENSITY * pow(force, 1.5);\\n    if (intensity > comparedIntensity) {\\n        vec4 newColor = directionalBlur(gl_FragCoord.xy / uResolution, normalize(direction), intensity);\\n        gl_FragColor = newColor;\\n    }\\n    return intensity;\\n}\\n\\nvoid main() {\\n    gl_FragColor = texture2D(planeTexture, vTextureCoord);\\n    float p1intensity = distort(uP0center, uP0force, 0.0);\\n    float p2intensity = distort(uP1center, uP1force, p1intensity);\\n}\"","export default \"\\nprecision mediump float;\\n\\n// default mandatory variables\\nattribute vec3 aVertexPosition;\\nattribute vec2 aTextureCoord;\\n\\nuniform mat4 uMVMatrix;\\nuniform mat4 uPMatrix;\\n\\nuniform mat4 planeTextureMatrix;\\n\\n// custom varyings\\nvarying vec3 vVertexPosition;\\nvarying vec2 vTextureCoord;\\n\\nvoid main() {\\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\\n\\n    // varyings\\n    vVertexPosition = aVertexPosition;\\n    vTextureCoord = (planeTextureMatrix * vec4(aTextureCoord, 0.0, 1.0)).xy;\\n}\"","import styled from '@emotion/styled';\nimport { VideoPlayerRef, VideoState } from 'Elements/VideoPlayer';\nimport PlayersManager from 'Players/PlayersManager';\nimport SkipIntro from 'Scenes/Game/Singing/GameOverlay/Components/SkipIntro';\nimport SkipOutro from 'Scenes/Game/Singing/GameOverlay/Components/SkipOutro';\nimport { GraphicSetting, MobilePhoneModeSetting, useSettingValue } from 'Scenes/Settings/SettingsState';\nimport { GAME_MODE, PlayerSetup, Song } from 'interfaces';\nimport { useEffect, useRef } from 'react';\nimport GameState from '../GameState/GameState';\nimport DurationBar from './Components/DurationBar';\nimport Lyrics from './Components/Lyrics';\nimport ScoreText from './Components/ScoreText';\nimport CanvasDrawing from './Drawing';\n\nimport fragShader from 'Scenes/Game/Singing/GameOverlay/Drawing/Shaders/shader.frag?raw';\nimport vertShader from 'Scenes/Game/Singing/GameOverlay/Drawing/Shaders/shader.vert?raw';\n\ninterface Props {\n  song: Song;\n  currentStatus: VideoState;\n  width: number;\n  height: number;\n  onSongEnd: () => void;\n  playerSetups: PlayerSetup[];\n  duration: number;\n  effectsEnabled: boolean;\n  playerChanges: number[][];\n  videoPlayerRef: VideoPlayerRef | null;\n  isPauseMenuVisible: boolean;\n}\n\nconst MAX_RENDER_RESOLUTION_W = 1920;\n\nfunction GameOverlay({\n  currentStatus,\n  width,\n  height,\n  playerSetups,\n  onSongEnd,\n  playerChanges,\n  effectsEnabled,\n  videoPlayerRef,\n  isPauseMenuVisible,\n}: Props) {\n  const [graphicLevel] = useSettingValue(GraphicSetting);\n  const [mobilePhoneMode] = useSettingValue(MobilePhoneModeSetting);\n  const canvas = useRef<HTMLCanvasElement | null>(null);\n  const drawer = useRef<CanvasDrawing | null>(null);\n  const lyrics = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    GameState.startInputMonitoring();\n\n    return () => {\n      GameState.stopInputMonitoring();\n    };\n  }, []);\n\n  const overlayWidth = MAX_RENDER_RESOLUTION_W;\n  const overlayHeight = overlayWidth * (height / width);\n\n  const overlayScaleFactor = overlayHeight / height;\n  // const resolutionScaleFactor = overlayWidth / MAX_RENDER_RESOLUTION_W;\n\n  useEffect(() => {\n    if (!canvas.current || !lyrics.current) return;\n\n    drawer.current = new CanvasDrawing(\n      canvas.current,\n      lyrics.current.offsetHeight * overlayScaleFactor,\n      // resolutionScaleFactor,\n    );\n    drawer.current.start();\n\n    return () => {\n      drawer.current?.end();\n    };\n  }, [canvas.current, lyrics.current?.offsetHeight, overlayScaleFactor]);\n\n  useEffect(() => {\n    if (isPauseMenuVisible && drawer.current?.isPlaying()) {\n      drawer.current?.pause();\n    } else if (!isPauseMenuVisible && !drawer.current?.isPlaying()) {\n      drawer.current?.resume();\n    }\n  }, [isPauseMenuVisible]);\n\n  useEffect(() => {\n    if (currentStatus === VideoState.ENDED && onSongEnd) {\n      onSongEnd();\n    }\n  }, [currentStatus, onSongEnd]);\n\n  const players = PlayersManager.getPlayers();\n  const showMultipleLines = !mobilePhoneMode && players.length === 2;\n\n  return (\n    <Screen>\n      {graphicLevel === 'high' && (\n        <>\n          <script type={'x-shader/x-fragment'} id={'plane-fs'}>\n            {fragShader}\n          </script>\n          <script id=\"plane-vs\" type=\"x-shader/x-vertex\">\n            {vertShader}\n          </script>\n          <Curtains id=\"canvas\" style={{ zIndex: 10000 }} />\n        </>\n      )}\n      <GameCanvas id=\"plane\">\n        <canvas ref={canvas} width={overlayWidth} height={overlayHeight} data-sampler=\"planeTexture\" />\n      </GameCanvas>\n      {effectsEnabled && (\n        <>\n          <SkipIntro playerRef={videoPlayerRef} isEnabled={!isPauseMenuVisible} />\n          <SkipOutro onSongEnd={onSongEnd} isEnabled={!isPauseMenuVisible} />\n        </>\n      )}\n      <DurationBar players={playerSetups} />\n      {showMultipleLines && (\n        <Lyrics player={players[0]} playerChanges={playerChanges} effectsEnabled={effectsEnabled} />\n      )}\n      <Scores>\n        {effectsEnabled && (\n          <>\n            {GameState.getSingSetup()?.mode === GAME_MODE.CO_OP ? (\n              <span data-test=\"players-score\" data-score={GameState.getPlayerScore(0)}>\n                <ScoreText score={GameState.getPlayerScore(0)} />\n              </span>\n            ) : (\n              PlayersManager.getPlayers().map((player) => (\n                <span\n                  key={player.number}\n                  data-test={`player-${player.number}-score`}\n                  data-score={GameState.getPlayerScore(player.number)}>\n                  <ScoreText score={GameState.getPlayerScore(player.number)} />\n                </span>\n              ))\n            )}\n          </>\n        )}\n      </Scores>\n      <div ref={lyrics}>\n        <Lyrics\n          player={players[showMultipleLines ? 1 : 0]}\n          playerChanges={playerChanges}\n          bottom\n          effectsEnabled={effectsEnabled}\n        />\n      </div>\n    </Screen>\n  );\n}\n\nexport default GameOverlay;\n\nconst Screen = styled.div`\n  height: 100%;\n  color: white;\n  -webkit-text-stroke: 0.2rem black;\n  font-weight: bold;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst GameCanvas = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  canvas {\n    width: 100%;\n    height: 100%;\n  }\n`;\n\nconst Curtains = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n`;\n\nconst Scores = styled.div`\n  flex: 1;\n  height: 100%;\n  box-sizing: border-box;\n  font-size: 5.5rem;\n  display: flex;\n  justify-content: center;\n  gap: 4rem;\n  padding-right: 4rem;\n  flex-direction: column;\n  text-align: right;\n  z-index: 1;\n`;\n","import { PlayerSetup, seconds, SingSetup, Song } from 'interfaces';\nimport {\n  ComponentProps,\n  ForwardedRef,\n  forwardRef,\n  MutableRefObject,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport styled from '@emotion/styled';\nimport VideoPlayer, { VideoPlayerRef, VideoState } from 'Elements/VideoPlayer';\nimport useKeyboard from 'hooks/useKeyboard';\nimport useKeyboardHelp from 'hooks/useKeyboardHelp';\nimport usePrevious from 'hooks/usePrevious';\nimport { FPSCountSetting, InputLagSetting, useSettingValue } from 'Scenes/Settings/SettingsState';\nimport PauseMenu from './GameOverlay/Components/PauseMenu';\nimport GameOverlay from './GameOverlay/GameOverlay';\nimport GameState from './GameState/GameState';\n\ninterface Props extends ComponentProps<typeof Container> {\n  singSetup: SingSetup;\n  song: Song;\n  width: number;\n  height: number;\n  autoplay?: boolean;\n  showControls?: boolean;\n  onCurrentTimeUpdate?: (newTime: number) => void;\n  onSongEnd: () => void;\n  onStatusChange?: (status: VideoState) => void;\n  players: PlayerSetup[];\n  playerChanges?: number[][];\n\n  effectsEnabled?: boolean;\n  restartSong?: () => void;\n}\n\nexport interface PlayerRef {\n  play: () => void;\n  pause: () => void;\n  seekTo: (time: number) => void;\n  setPlaybackSpeed: (speed: number) => void;\n}\n\nfunction usePlayerSetDuration(playerRef: MutableRefObject<VideoPlayerRef | null>, currentStatus: VideoState) {\n  const [duration, setDuration] = useState(0);\n  useEffect(() => {\n    if (playerRef.current && currentStatus === VideoState.PLAYING && duration === 0) {\n      playerRef.current.getDuration().then((dur: number) => {\n        setDuration(dur);\n        GameState.setDuration(dur);\n      });\n    }\n  }, [duration, playerRef, currentStatus]);\n\n  return duration;\n}\n\nfunction Player(\n  {\n    song,\n    width,\n    height,\n    autoplay = true,\n    showControls = false,\n    onCurrentTimeUpdate,\n    onSongEnd,\n    onStatusChange,\n    players,\n    playerChanges = [[], []],\n    effectsEnabled = true,\n    singSetup,\n    restartSong,\n    ...restProps\n  }: Props,\n  ref: ForwardedRef<PlayerRef>,\n) {\n  const player = useRef<VideoPlayerRef | null>(null);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [currentStatus, setCurrentStatus] = useState(VideoState.UNSTARTED);\n  const [inputLag] = useSettingValue(InputLagSetting);\n  const [pauseMenu, setPauseMenu] = useState(false);\n\n  useEffect(() => {\n    GameState.setSong(song);\n    GameState.setSingSetup(singSetup);\n\n    return () => {\n      GameState.resetSingSetup();\n    };\n  }, [song, singSetup]);\n\n  useEffect(() => {\n    if (!player.current) {\n      return;\n    }\n    if (currentStatus === VideoState.PLAYING) {\n      const interval = setInterval(async () => {\n        if (!player.current) return;\n\n        const time = Math.max(0, (await player.current.getCurrentTime()) * 1000 - inputLag);\n        setCurrentTime(time);\n        onCurrentTimeUpdate?.(time);\n        GameState.setCurrentTime(time);\n        GameState.update();\n      }, 1000 / FPSCountSetting.get());\n\n      return () => clearInterval(interval);\n    }\n  }, [player, onCurrentTimeUpdate, currentStatus, inputLag]);\n\n  const duration = usePlayerSetDuration(player, currentStatus);\n\n  useImperativeHandle(ref, () => ({\n    seekTo: (time: seconds) => player.current!.seekTo(time),\n    setPlaybackSpeed: (speed: number) => player.current!.setPlaybackSpeed(speed),\n    play: () => player.current!.playVideo(),\n    pause: () => player.current!.pauseVideo(),\n  }));\n\n  const onStateChangeCallback = useCallback(\n    (state: VideoState) => {\n      setCurrentStatus(state);\n      onStatusChange?.(state);\n    },\n    [setCurrentStatus, onStatusChange],\n  );\n\n  const isPauseMenuAvailable = effectsEnabled && onSongEnd !== undefined;\n\n  const openPauseMenu = () => {\n    setPauseMenu(true);\n    player.current?.pauseVideo();\n  };\n\n  const closePauseMenu = () => {\n    setPauseMenu(false);\n    player.current?.playVideo();\n  };\n\n  const togglePauseMenu = () => {\n    if (pauseMenu) {\n      closePauseMenu();\n    } else {\n      openPauseMenu();\n    }\n  };\n  const previousStatus = usePrevious(currentStatus);\n  useEffect(() => {\n    if (!isPauseMenuAvailable) return;\n\n    const wasJustPaused =\n      previousStatus !== VideoState.PAUSED &&\n      previousStatus !== VideoState.BUFFERING &&\n      currentStatus === VideoState.PAUSED;\n\n    if (currentStatus === VideoState.PLAYING && pauseMenu) {\n      player.current?.pauseVideo();\n    } else if (wasJustPaused && !pauseMenu) {\n      // Someone clicked on the video\n      setPauseMenu(true);\n    }\n  }, [pauseMenu, currentStatus, previousStatus, isPauseMenuAvailable]);\n\n  useKeyboard(\n    {\n      back: togglePauseMenu,\n    },\n    isPauseMenuAvailable,\n    [pauseMenu],\n  );\n\n  const help = useMemo(\n    () => ({\n      back: 'Pause Menu',\n    }),\n    [],\n  );\n  useKeyboardHelp(help, effectsEnabled);\n  return (\n    <Container {...restProps}>\n      {pauseMenu && <PauseMenu onExit={onSongEnd} onResume={closePauseMenu} onRestart={restartSong!} />}\n      {currentStatus !== VideoState.UNSTARTED && (\n        <Overlay\n          style={{\n            width: `${width}px`,\n            height: `${height}px`,\n          }}>\n          <GameOverlay\n            isPauseMenuVisible={pauseMenu}\n            effectsEnabled={effectsEnabled}\n            playerChanges={playerChanges}\n            duration={duration}\n            currentStatus={currentStatus}\n            song={song}\n            width={width}\n            height={height}\n            onSongEnd={onSongEnd}\n            playerSetups={players}\n            videoPlayerRef={player.current}\n          />\n        </Overlay>\n      )}\n      <PlayerContainer>\n        <VideoPlayer\n          ref={player}\n          video={song.video}\n          width={width}\n          height={height}\n          controls={showControls}\n          autoplay={autoplay}\n          disablekb={process.env.NODE_ENV !== 'development'}\n          volume={song.volume}\n          startAt={song.videoGap ?? 0}\n          onStateChange={onStateChangeCallback}\n        />\n      </PlayerContainer>\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  position: relative;\n`;\n\nconst Overlay = styled.div`\n  position: absolute;\n  z-index: 1;\n  background-color: rgba(0, 0, 0, 0.2);\n  pointer-events: none;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n`;\n\nconst PlayerContainer = styled.div`\n  overflow: hidden;\n  height: 100%;\n`;\n\nexport default forwardRef(Player);\n"],"names":["castSlice","array","start","end","length","baseSlice","rsAstralRange","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboRange","rsVarRange","rsZWJ","reHasUnicode","hasUnicode","string","asciiToArray","rsAstral","rsCombo","rsFitz","rsModifier","rsNonAstral","rsRegional","rsSurrPair","reOptMod","rsOptVar","rsOptJoin","rsSeq","rsSymbol","reUnicode","unicodeToArray","stringToArray","createCaseFirst","methodName","toString","strSymbols","chr","trailing","upperFirst","upperFirst$1","capitalize","CLONE_DEEP_FLAG","CLONE_SYMBOLS_FLAG","cloneDeep","value","baseClone","uniq","baseUniq","ThumbUpAlt","createSvgIcon","_jsx","useInterval","callback","delay","savedCallback","useRef","useEffect","interval_1","useInterval$1","usePrevious","ref","current","SelectInputModal","onClose","closeButtonText","Modal","jsx","MenuContainer","SelectInputView","PauseMenu","onResume","onExit","onRestart","menuRef","inputLagRef","focus","isInputModalOpen","setIsInputModalOpen","useState","register","useKeyboardNav","enabled","jsxs","MenuButton","InputLag","SKIP_INTRO_MS","isE2E","getSkipIntroTime","song","Math","floor","getSongFirstNoteMs","SKIP_INTRO_THRESHOLD_MS","songHasLongIntro","videoGap","SkipIntro","playerRef","isEnabled","mobilePhoneMode","useSettingValue","MobilePhoneModeSetting","GameState","getSong","hasLongIntro","useMemo","songFirstNoteMs","shouldBeVisible","getCurrentTime","canSkip","useKeyboard","accept","skipIntro","seekTo","artist","title","posthog","capture","name","help","back","useKeyboardHelp","Container","Kbd","_styled","target","typography","props","visible","process","disabled","SHOW_OUTRO_THRESHOLD_MS","SkipOutro","onSongEnd","duration","getDuration","singingEndBeat","max","getPlayers","map","getLastNoteEnd","player","getLastNotesSection","singingEndTime","beatToMs","currentBeat","setCurrentBeat","skipping","setSkipping","getCurrentBeat","useDebounce","skipOutro","setTimeout","SkipOutro$1","React","memo","DurationBar","players","currentTime","beatLength","getSongBeatLength","firstNotes","tracks","filter","v","index","find","track","sections","getFirstNoteStartFromSections","gap","lastNotes","getLastNoteEndFromSections","durationMs","Bar","Marker","note","BarFill","styles","BaseMarker","colors","text","active","left","min","position","BaseBarFill","width","round","fill","_interopRequireDefault","require$$0","_Error","default_1","_createSvgIcon","require$$1","_jsxRuntime","require$$2","_default","Warning","PlayerStatus","status","tooltipPosition","restProps","StatusContainer","UnavailableIcon","UnstableIcon","StatusDescription","ErrorIcon","WarningIcon","usePlayerMicStatus","playerNumber","intervalMs","onMeasure","data","setData","interval","setInterval","InputManager","getInputStatus","clearInterval","LyricsVolumeIndicator","bottom","playerVolume","getPlayerVolume","number","VolumeIndicator","StyledPlayerStatus","StyledPing","Ping","Lyrics","playerChanges","effectsEnabled","playerState","getPlayer","playerColor","thisPlayerChanges","getTrackIndex","section","getCurrentSection","nextSection","getNextSection","subsequentSection","previousChange","beat","nextChange","Infinity","timeToNextChange","passTheMicProgress","shouldBlink","hasNotes","isNotesSection","beatsBetweenSectionAndNote","LyricsContainer","PassTheMicProgress","LyricsLine","HeadstartContainer","Headstart","notes","LyricContainer","type","LyricActiveContainer","LyricActive","lyrics","trim","endsWith","PassTheMicSymbol","Fragment","BaseHeadstart","percent","color","transformOrigin","transform","right","background","BaseLyricActive","children","clipPath","BasePassTheMicProgress","progress","SwapHorizIcon","shouldForwardProp","prop","shouldShake","nextLine","inactive","default","formatter","Intl","NumberFormat","undefined","maximumFractionDigits","ScoreText","score","format","getColor","ctx","isStar","isHit","isPerfect","starPerfect","perfect","star","hit","miss","getNoteColor","playerNote","_typeof","obj","trimLeft","trimRight","tinycolor","opts","rgb","inputToRGB","RsRGB","GsRGB","BsRGB","R","G","B","boundAlpha","hsv","rgbToHsv","h","hsl","rgbToHsl","l","allow3Char","rgbToHex","allow4Char","rgbaToHex","bound01","hexNames","secondColor","hex8String","rgbaToArgbHex","secondHex8String","gradientType","s","formatSet","formattedString","hasAlpha","needsAlphaFormat","fn","args","_lighten","_brighten","_darken","_desaturate","_saturate","_greyscale","_spin","_analogous","_complement","_monochromatic","_splitcomplement","polyad","newColor","i","convertToPercentage","a","ok","stringInputToObject","isValidCSSUnit","rgbToRgb","hsvToRgb","hslToRgb","r","g","b","d","hue2rgb","p","q","t","f","mod","hex","pad2","convertDecimalToHex","color1","color2","amount","clamp01","hue","result","step","results","slices","part","ret","modification","rgb1","rgb2","rgba","c1","c2","wcag2","readability","wcag2Parms","out","validateWCAG2Parms","baseColor","colorList","bestColor","bestScore","includeFallbackColors","level","size","names","flip","o","flipped","n","isOnePointZero","processPercent","isPercentage","val","parseIntFromHex","c","convertHexToDecimal","matchers","CSS_INTEGER","CSS_NUMBER","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","named","match","parms","cachedColors","getColors","setAlpha","toRgbString","ray","canvas","x","y","height","alpha","globalAlpha","gradient","createRadialGradient","cFirst","cLast","c0","addColorStop","randomInt","beginPath","arc","PI","closePath","fillStyle","debris","angle","spreadValue","initial","spread","random","randomSign","weight","sign","baseTtlMs","ttlSpreadMs","velocityModifier","SungTriangle","constructor","finished","tick","delta","percentage","ttl","startingTtl","ticksLeft","heightModifier","velocityX","velocityY","initialAngle","precisionMedium","precisionMedium$1","defaultAttributes","defaultAttributes$1","defaultVaryings","defaultVaryings$1","planeVS","planeFS","shaderPassVS","shaderPassFS","pitchPadding","NOTE_HEIGHT","BIG_NOTE_HEIGHT","getPlayerCanvas","drawingData","pixelsOverRatio","paddingHorizontal","paddedHeight","paddingVertical","playerCount","baseX","baseY","playerIndex","calculateData","currentSectionIndex","songBeatLength","minPitch","maxPitch","currentSection","playerCanvas","lastNote","at","sectionEndBeat","timeSectionGap","maxTime","pitchStepHeight","simpleRoundRect","radius","stroke","actualWidth","actualRadius","moveTo","lineTo","quadraticCurveTo","roundRect","glass","save","clip","fillRect","restore","applyColor","style","strokeStyle","lineWidth","drawRawNote","noteType","lines","freestyle","normal","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","drawRawPlayerNote","test","SHADOW_PAD","smallNoteFragments","w","middle","bigNoteFragments","spriteMap","blueMiss","draw","padding","fragments","blueHit","bluePerfect","blueStarMiss","blueStarHit","blueStarPerfect","redMiss","redHit","redPerfect","redStarMiss","redStarHit","redStarPerfect","noteNormal","noteStar","noteFreestyle","noteRap","createCanvas","document","createElement","maxWidth","Object","values","sprite","reduce","e","cachedCanvas","getContext","currentHeight","positions","entries","pads","acc","forEach","key","entry","getSprite","fragment","drawSprite","destCtx","destX","destY","destW","destH","paddingWScale","paddingHScale","spriteData","finalWPadding","finalHPadding","imageSmoothingEnabled","drawImage","drawSpriteWithStartAndEnd","spriteName","startData","widthScale","endingsWidth","endingsSize","middleSize","getSpriteName","drawNote","drawPlayerFrequencyTrace","lineJoin","frequencyRecords","preciseDistance","drawPlayerNote","ParticleManager","particles","lastTick","Date","now","getTimeDelta","timeShift","currentTick","particle","add","push","ParticleManager$1","baseTtl","ttlSpread","initialWidth","TriangleParticle","elapsedTicks","ExplodingNoteParticle","particleManager","lightColor","lighten","darkColor","darken","density","rand","finalColor","finalY","initialTtl","FadeoutNote","translate","velocity","WIDTH","WIDTH_SPREAD","pow","easeOutQuart","RayParticle","seed","widthModifier","easing","mainRayWidth","mainRayHeight","sin","INTERVAL_PX","VibratoParticle","deltaY","MAX_LOOKUP_RANGE","getPlayerNoteAtBeat","playerNotes","CanvasDrawing","verticalMargin","scaleFactor","loop","pauseTime","pausedOn","shaders","sectionChange","subscribe","onSectionEnd","drawFrame","pause","resume","_a","cleanup","unsubscribe","isPlaying","startTime","FPSCountSetting","clearRect","PlayersManager","drawPlayer","get","endTime","baseTimeout","finalTimeout","requestAnimationFrame","getDrawingData","GraphicSetting","setDistortionForce","displacements","calculateDisplacements","drawNotesToSing","drawSungNotes","drawFlare","updatePlayerForce","getPlayerForce","sungNotes","currentPlayerNotes","getPlayerNoteDistance","curr","lastPlayerNote","lastPlayerNoteEnd","beatsSinceLastHit","forcePercent","_c","getNoteCoords","pitch","distance","vibrato","noDistanceNoteTypes","includes","displacement","finalX","getPreciseY","randomFloat","updatePlayerCenter","fadeoutNotes","explodeNotes","sungNotesStreak","sungNote","currLength","sungNoteLength","displacementRange","displacementX","displacementY","sectionShift","findIndex","getCurrentSectionIndex","getPlayerNotes","getMinPitch","getMaxPitch","frequencies","getPlayerFrequencies","big","sectionStart","dx","dy","pitchY","fragShader","vertShader","MAX_RENDER_RESOLUTION_W","GameOverlay","currentStatus","playerSetups","videoPlayerRef","isPauseMenuVisible","graphicLevel","drawer","startInputMonitoring","stopInputMonitoring","overlayWidth","overlayHeight","overlayScaleFactor","offsetHeight","VideoState","ENDED","showMultipleLines","Screen","Curtains","zIndex","GameCanvas","Scores","getSingSetup","mode","GAME_MODE","CO_OP","getPlayerScore","usePlayerSetDuration","setDuration","PLAYING","then","dur","Player","autoplay","showControls","onCurrentTimeUpdate","onStatusChange","singSetup","restartSong","setCurrentTime","setCurrentStatus","UNSTARTED","inputLag","InputLagSetting","pauseMenu","setPauseMenu","setSong","setSingSetup","resetSingSetup","time","update","useImperativeHandle","setPlaybackSpeed","speed","play","playVideo","pauseVideo","onStateChangeCallback","useCallback","state","isPauseMenuAvailable","openPauseMenu","closePauseMenu","togglePauseMenu","previousStatus","wasJustPaused","PAUSED","BUFFERING","Overlay","PlayerContainer","VideoPlayer","video","volume","forwardRef"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,20,21,28,33,34,35,36,37,38,39]}